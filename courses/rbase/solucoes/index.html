<!DOCTYPE html><html lang="pt" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.1.0 for Hugo" />
  

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="LADDEM" />

  
  
  
    
  
  <meta name="description" content="Soluções para os exercícios feitos em sala e os exercícios de revisão do final das aulas." />

  
  <link rel="alternate" hreflang="pt" href="https://laddem.github.io/courses/rbase/solucoes/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="rgb(251, 191, 183)" />
  

  
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/purebasic.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/purebasic.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Cutive+Mono&family=Lora:wght@400;700&family=Roboto:wght@400;700&display=swap&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cutive+Mono&family=Lora:wght@400;700&family=Roboto:wght@400;700&display=swap&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.46f8102c91669d08bf92f59f6531234a.css" />

  



  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://laddem.github.io/courses/rbase/solucoes/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="LADDEM" />
  <meta property="og:url" content="https://laddem.github.io/courses/rbase/solucoes/" />
  <meta property="og:title" content="Soluções | LADDEM" />
  <meta property="og:description" content="Soluções para os exercícios feitos em sala e os exercícios de revisão do final das aulas." /><meta property="og:image" content="https://laddem.github.io/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_300x300_fit_lanczos_2.png" />
    <meta property="twitter:image" content="https://laddem.github.io/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_300x300_fit_lanczos_2.png" /><meta property="og:locale" content="pt" />
  
    
      <meta
        property="article:published_time"
        content="2021-06-15T20:04:57-03:00"
      />
    
    <meta property="article:modified_time" content="2021-06-15T20:04:57-03:00">
  

  



  

  

  





  <title>Soluções | LADDEM</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="3d1a76ac770e4f1e7d0664b1828c01eb" >

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.f16be01fc8fb2b5885dd67ce942d1185.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_0x70_resize_lanczos_2.png" alt="LADDEM"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_0x70_resize_lanczos_2.png" alt="LADDEM"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Sobre</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/courses/"><span>Cursos</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contato</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    





<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          R-base
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li><a href="/courses/"><i class="fas fa-arrow-left pr-1"></i>Cursos</a></li>
      </ul>

      
      
        
          
        
      


  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/courses/rbase/">R-base</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/courses/rbase/dia1/">Básico</a></li>



  <li class=""><a href="/courses/rbase/dia2/">Manipulando dados</a></li>



  <li class=""><a href="/courses/rbase/dia3/">Estatística e Visualização</a></li>



  <li class="active"><a href="/courses/rbase/solucoes/">Soluções</a></li>

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      

      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#aula-1-básico">Aula 1: Básico</a>
      <ul>
        <li><a href="#fundamentos">Fundamentos</a></li>
        <li><a href="#objetos-em-r">Objetos em R</a></li>
        <li><a href="#revisão">Revisão</a></li>
      </ul>
    </li>
    <li><a href="#aula-2-manipulação-de-dados">Aula 2: Manipulação de dados</a>
      <ul>
        <li><a href="#leituraimportação">Leitura/Importação</a></li>
        <li><a href="#selecionando-valores">Selecionando valores</a></li>
        <li><a href="#modificando-valores">Modificando valores</a></li>
        <li><a href="#revisão-1">Revisão</a></li>
      </ul>
    </li>
  </ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          
            
  <nav class="d-none d-md-flex" aria-label="breadcrumb">
    <ol class="breadcrumb">
      
  
  
  

  <li class="breadcrumb-item">
    <a href="/">
      
        Home
      
    </a>
  </li>


  <li class="breadcrumb-item">
    <a href="/courses/">
      
        Cursos
      
    </a>
  </li>


  <li class="breadcrumb-item">
    <a href="/courses/rbase/">
      
        R-base
      
    </a>
  </li>


      <li class="breadcrumb-item active" aria-current="page">
        Soluções
      </li>
    </ol>
  </nav>


          

          <h1>Soluções</h1>

          <div class="article-style">
            <p>Soluções para os exercícios feitos em sala e os exercícios de revisão do final das aulas.</p>
<h2 id="aula-1-básico">Aula 1: Básico</h2>
<h3 id="fundamentos">Fundamentos</h3>
<h4 id="funções">Funções</h4>
<pre><code class="language-r">round(3.1415)
</code></pre>
<pre><code>## [1] 3
</code></pre>
<pre><code class="language-r">factorial(3)
</code></pre>
<pre><code>## [1] 6
</code></pre>
<p>Só de olhar para as funções e seus resultados, você conseguíria dizer:</p>
<ul>
<li>O que cada função faz?</li>
<li>Quais entradas (inputs) ela pede?</li>
<li>Qual saída ela produz (output)?</li>
<li>Que opções alternativas (argumentos) elas poderiam conter?</li>
</ul>
<p>A função <code>round()</code> arredonda valores decimais, enquanto <code>factorial()</code> calcula o fatorial de um número. Ambas recebem inputs numéricos, e emitem outputs numéricos também. <code>round()</code> tem um argumento extra <code>digits</code>, que permite determina para quantas casas decimais o número deverá ser arredondado.</p>
<h4 id="argumentos">Argumentos</h4>
<pre><code class="language-r">dado &lt;- 1:6

# dado limpo
sample(dado, size = 1)
</code></pre>
<pre><code>## [1] 5
</code></pre>
<pre><code class="language-r"># dado viciado
sample(dado, size = 1, prob = c(1/8, 1/8, 1/8, 1/8, 1/8, 3/8))
</code></pre>
<pre><code>## [1] 2
</code></pre>
<p>Repita a operação de sample acima com o dado “viciado” e com o dado “limpo” e verifique se você consegue perceber empiricamente que meu dado está “viciado”.</p>
<p>Esse exercício era para repetir o código várias vezes e verificar se o resultado 6 aparecia mais no dado viciado que no limpo.</p>
<p>Que outros argumentos existem na função sample? Qual o papel do argumento replace?</p>
<p>Sample tem os argumento opcionais <code>size</code>, <code>replace</code> e <code>prob</code>. O primeiro define quantas amostram devem ser retiradas, o segundo define se a amostra tem reposição, ou seja, se um valor sorteado é retirado da amostra ou não e o terceiro define com que probabilidades devem ser feitos os sorteios, o padrão é com probabilidades iguais para todos os valores do vetor <code>x</code>.</p>
<h4 id="sua-primeira-função">Sua primeira função</h4>
<p>Escreva uma função que role 2 dados de 10 faces e some seus resultados.</p>
<pre><code class="language-r">role10 &lt;- function() {
  x &lt;- sample(x = 1:10, size = 1)
  y &lt;- sample(x = 1:10, size = 1)
  x + y
}

role10()
</code></pre>
<pre><code>## [1] 10
</code></pre>
<h4 id="ajuda">Ajuda</h4>
<p>Consulte a ajuda das funções sum, mean, min, max, range. Porque todas elas tem o argumento na.rm? O que argumento o trim em mean faz? Qual a melhor maneira de rapidamente entender o que uma função faz através da página de ajuda?</p>
<pre><code class="language-r">?sum
?mean
?min
?max
?range
</code></pre>
<p>O argumento na.rm permite que os cálculos das medidas sejam feitos mesmo na presença de valores nulos/desconhecidos, registrados no R como <code>NA</code>. Você pode ler o argumento <code>na.rm</code> como &ldquo;Remova os <code>NA</code>s&rdquo;. A melhor maneira de entender o funcionamento de uma função rapidamente é ler as seções &ldquo;Description&rdquo; e &ldquo;Examples&rdquo;, que você pode utilizar para rapidamente entender como a função funciona na prática.</p>
<h3 id="objetos-em-r">Objetos em R</h3>
<h4 id="vetores">Vetores</h4>
<p>Teste se vetor2, criado anteriormente é um vetor. Crie um vetor com os nomes de cinco pessoas da sala.</p>
<pre><code class="language-r">vetor2 &lt;- c(1, 2, 3, 4, 5)
is.vector(vetor2)
</code></pre>
<pre><code>## [1] TRUE
</code></pre>
<pre><code class="language-r">nomes &lt;- c(&quot;Pessoa 1&quot;, &quot;Pessoa 2&quot;, &quot;Pessoa 3&quot;, &quot;Pessoa 4&quot;, &quot;Pessoa 5&quot;)
nomes
</code></pre>
<pre><code>## [1] &quot;Pessoa 1&quot; &quot;Pessoa 2&quot; &quot;Pessoa 3&quot; &quot;Pessoa 4&quot; &quot;Pessoa 5&quot;
</code></pre>
<p>A função <code>is.vector</code> testa se um objeto é do tipo vetor. Existem outras funções da família <code>is.____</code> para todos os objetos R. Você pode criar um vetor de nomes usando aspas ao redor dos valores das informações em cada posição do vetor e atribuir isso <code>&lt;-</code> para um objeto com um nome da sua preferência.</p>
<hr>
<p>Considerando os dois vetores abaixo, calcule as suas médias. Porque não é possível calcular a média do segundo vetor.</p>
<pre><code class="language-r">idade1 &lt;- c(20, 25, 30, 35, 40, 45, 50)
idade2 &lt;- c(&quot;20&quot;, &quot;25&quot;, &quot;30&quot;, &quot;35&quot;, &quot;40&quot;, &quot;45&quot;, &quot;50&quot;)

mean(idade1)
</code></pre>
<pre><code>## [1] 35
</code></pre>
<pre><code class="language-r">mean(idade2)
</code></pre>
<pre><code>## Warning in mean.default(idade2): argumento não é numérico nem lógico: retornando
## NA
</code></pre>
<pre><code>## [1] NA
</code></pre>
<p>O primeiro vetor retorna normalmente porque <code>idade1</code> é um vetor de números. Apesar da sua aparência, <code>idade2</code> é um vetor de texto. Podemos verificar o tipo do vetor da seguinte forma:</p>
<pre><code class="language-r">typeof(idade1)
</code></pre>
<pre><code>## [1] &quot;double&quot;
</code></pre>
<pre><code class="language-r">typeof(idade2)
</code></pre>
<pre><code>## [1] &quot;character&quot;
</code></pre>
<hr>
<p>Qual a diferença entre: 1, “1”, “one” no R? Quais são números e quais são caracteres?</p>
<p>Ao invés de responder essa pergunta, podemos usar o R para satisfazer nossa curiosidade:</p>
<pre><code class="language-r">typeof(1)
</code></pre>
<pre><code>## [1] &quot;double&quot;
</code></pre>
<pre><code class="language-r">typeof(&quot;1&quot;)
</code></pre>
<pre><code>## [1] &quot;character&quot;
</code></pre>
<pre><code class="language-r">typeof(&quot;one&quot;)
</code></pre>
<pre><code>## [1] &quot;character&quot;
</code></pre>
<p>O primeiro é um número, os outros são caracteres de texto.</p>
<h4 id="atributos">Atributos</h4>
<p>Usando seus conhecimentos sobre atributos, construa uma pequena matriz com o nome de 5 pessoas da turma e seu sexo.</p>
<pre><code class="language-r">info &lt;- c(&quot;Pessoa 1&quot;, &quot;Pessoa 2&quot;, &quot;Pessoa 3&quot;, &quot;Pessoa 4&quot;, &quot;Pessoa 5&quot;, &quot;Masculino&quot;, &quot;Masculino&quot;, &quot;Masculino&quot;, &quot;Feminino&quot;, &quot;Feminino&quot;)

dim(info) &lt;- c(5, 2)

info
</code></pre>
<pre><code>##      [,1]       [,2]       
## [1,] &quot;Pessoa 1&quot; &quot;Masculino&quot;
## [2,] &quot;Pessoa 2&quot; &quot;Masculino&quot;
## [3,] &quot;Pessoa 3&quot; &quot;Masculino&quot;
## [4,] &quot;Pessoa 4&quot; &quot;Feminino&quot; 
## [5,] &quot;Pessoa 5&quot; &quot;Feminino&quot;
</code></pre>
<h4 id="matrizes">Matrizes</h4>
<p>Reconstrua a sua matriz original usando a função matrix ao invés de alterar os atributos. E os nomes das colunas?</p>
<pre><code class="language-r">info_matrix &lt;- matrix(info, nrow = 5, dimnames = list(1:5, c(&quot;Nome&quot;, &quot;Sexo&quot;)))
info_matrix
</code></pre>
<pre><code>##   Nome       Sexo       
## 1 &quot;Pessoa 1&quot; &quot;Masculino&quot;
## 2 &quot;Pessoa 2&quot; &quot;Masculino&quot;
## 3 &quot;Pessoa 3&quot; &quot;Masculino&quot;
## 4 &quot;Pessoa 4&quot; &quot;Feminino&quot; 
## 5 &quot;Pessoa 5&quot; &quot;Feminino&quot;
</code></pre>
<h4 id="classe">Classe</h4>
<p>Experimente brincar com o valor de objeto e ver</p>
<ul>
<li>Qual é a data de referência do R para calcular tempos?</li>
<li>O que acontece se o valor for negativo?</li>
</ul>
<pre><code class="language-r">objeto &lt;- 0
class(objeto) &lt;- c(&quot;POSIXct&quot;, &quot;POSIXt&quot;)

objeto
</code></pre>
<pre><code>## [1] &quot;1969-12-31 21:00:00 -03&quot;
</code></pre>
<pre><code class="language-r">objeto &lt;- -100000000
class(objeto) &lt;- c(&quot;POSIXct&quot;, &quot;POSIXt&quot;)

objeto
</code></pre>
<pre><code>## [1] &quot;1966-10-31 11:13:20 -03&quot;
</code></pre>
<p>Este exercício parte do princípio de que vocês compreenderam como o R entende tempos: eles são armazenadas como o número de segundos entre a data de referência do sistema e o tempo que ele pretendem medir. Assim, para descobrir a data de referência basta criar um objeto com o tempo 0 e passar a classe adequada para seus atributos e ver o resultado na tela. Da mesma forma, os números negativos representam tempos ocorridos antes dessa data de referência.</p>
<hr>
<p>Construa um fator a partir do vetor a seguir que registre os meses do ano. Dica: utilize o argumento levels da função factor.</p>
<pre><code class="language-r">f &lt;- c(1, 3, 9, 4, 11, 2, 6, 6, 3, 2, 9, 11, 12, 12, 1, 8)

factor(f, levels = 1:12, 
       labels = c(&quot;Jan&quot;, &quot;Fev&quot;, &quot;Mar&quot;, &quot;Abr&quot;, &quot;Mai&quot;, &quot;Jun&quot;,
                  &quot;Jul&quot;, &quot;Ago&quot;, &quot;Set&quot;, &quot;Out&quot;, &quot;Nov&quot;, &quot;Dez&quot;))
</code></pre>
<pre><code>##  [1] Jan Mar Set Abr Nov Fev Jun Jun Mar Fev Set Nov Dez Dez Jan Ago
## Levels: Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez
</code></pre>
<h4 id="coerção">Coerção</h4>
<p>Porque o R prefere coagir vetores lógicos mistos para números e vetores numéricos e lógicos para caractere?</p>
<p>A resposta é mais conceitual que prática, mas o objetivo é usar o tipo de dado mais genérico possível de tal forma que a gente não perca as informações. Veja alguns exemplos abaixo:</p>
<pre><code class="language-r"># Números misturados com valores lógicos
v &lt;- c(32, 64, 128, 256, TRUE, FALSE)
v
</code></pre>
<pre><code>## [1]  32  64 128 256   1   0
</code></pre>
<pre><code class="language-r"># Posso &quot;recuperar&quot; meus valores lógicos depois
as.logical(v[5:6])
</code></pre>
<pre><code>## [1]  TRUE FALSE
</code></pre>
<pre><code class="language-r"># Texto misturado com números
v &lt;- c(15, 21, 19, 80, &quot;Abóbora&quot;, &quot;Caqui&quot;)
v
</code></pre>
<pre><code>## [1] &quot;15&quot;      &quot;21&quot;      &quot;19&quot;      &quot;80&quot;      &quot;Abóbora&quot; &quot;Caqui&quot;
</code></pre>
<pre><code class="language-r"># Posso &quot;recuperar&quot; meus números depois
as.numeric(v[1:4])
</code></pre>
<pre><code>## [1] 15 21 19 80
</code></pre>
<h4 id="listas">Listas</h4>
<p>Crie uma lista de compras em que cada elemento da lista seja um vetor atômico de itens que você vai comprar de cada seção do supermercado. Para simplificar, utilize as seções: “limpeza”, “mercearia” e “hortifruti”.</p>
<pre><code class="language-r">lista_de_compras &lt;- list(
  limpeza = c(&quot;Creme dental&quot;, &quot;Sabonete&quot;, &quot;Xampú&quot;, &quot;Condicionador&quot;, &quot;Tira-limo&quot;),
  mercearia = c(&quot;Pão&quot;, &quot;Leite&quot;, &quot;Ovos&quot;, &quot;Queijo&quot;, &quot;Presunto&quot;, &quot;Manteiga&quot;, &quot;Biscoito&quot;),
  hortifruti = c(&quot;Cebola&quot;, &quot;Tomate&quot;, &quot;Alho&quot;, &quot;Banana&quot;, &quot;Mamão&quot;, &quot;Abacate&quot;, &quot;Batata&quot;, &quot;Pimenta dedo-de-moça&quot;)
)

lista_de_compras
</code></pre>
<pre><code>## $limpeza
## [1] &quot;Creme dental&quot;  &quot;Sabonete&quot;      &quot;Xampú&quot;         &quot;Condicionador&quot;
## [5] &quot;Tira-limo&quot;    
## 
## $mercearia
## [1] &quot;Pão&quot;      &quot;Leite&quot;    &quot;Ovos&quot;     &quot;Queijo&quot;   &quot;Presunto&quot; &quot;Manteiga&quot; &quot;Biscoito&quot;
## 
## $hortifruti
## [1] &quot;Cebola&quot;               &quot;Tomate&quot;               &quot;Alho&quot;                
## [4] &quot;Banana&quot;               &quot;Mamão&quot;                &quot;Abacate&quot;             
## [7] &quot;Batata&quot;               &quot;Pimenta dedo-de-moça&quot;
</code></pre>
<p>A principal característica da lista que eu queria ressaltar aqui é que podemos armazenar várias informações de tipos e tamanhos diferentes numa lista. É a estrutura de dados mais flexível no R.</p>
<h4 id="data-frames">Data Frames</h4>
<p>Crie um data frame contendo informações de cinco colegas de turma: registre o nome, a idade presumida, o sexo, a profissão e a renda presumida. Não precisa perguntar, basta chutar um valor que você ache.</p>
<pre><code class="language-r">df &lt;- data.frame(nome = c(&quot;Colega 1&quot;, &quot;Colega 2&quot;, &quot;Colega 3&quot;, &quot;Colega 4&quot;, &quot;Colega 5&quot;),
                 idade = c(20, 30, 40, 25, 35),
                 sexo = c(&quot;M&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;), 
                 profissao = c(&quot;Professor&quot;, &quot;Pesquisador&quot;, &quot;Programador&quot;, &quot;Jornalista&quot;, &quot;Analista de dados&quot;),
                 renda = c(2000, 3000, 1500, 2000, 4000))

df
</code></pre>
<pre><code>##       nome idade sexo         profissao renda
## 1 Colega 1    20    M         Professor  2000
## 2 Colega 2    30    F       Pesquisador  3000
## 3 Colega 3    40    F       Programador  1500
## 4 Colega 4    25    F        Jornalista  2000
## 5 Colega 5    35    M Analista de dados  4000
</code></pre>
<h3 id="revisão">Revisão</h3>
<ol>
<li>
<p>Como você poderia identificar o tipo de um objeto? Como você poderia identificar a classe dele? Qual a diferença entre essas duas coisas? Porque isso é relevante?</p>
<p>Supondo que você tenha um objeto desconhecido, você pode usar as funções descritas na aula para identificar seu tipo:</p>
<pre><code class="language-r">v &lt;- c(1, 2, 3, 4, NA)

typeof(v)
</code></pre>
<pre><code>## [1] &quot;double&quot;
</code></pre>
<pre><code class="language-r">class(v)
</code></pre>
<pre><code>## [1] &quot;numeric&quot;
</code></pre>
<pre><code class="language-r">is.vector(v)
</code></pre>
<pre><code>## [1] TRUE
</code></pre>
<pre><code class="language-r">is.list(v)
</code></pre>
<pre><code>## [1] FALSE
</code></pre>
<p>O tipo de um objeto define quais informações estão guardadas nele:</p>
<ul>
<li>double guardam números reais, que contém casas decimais</li>
<li>integer guardam números inteiros</li>
<li>character guardam strings de caracteres em formato texto</li>
<li>listas guardam objetos R, como vetores, funções, outras listas</li>
</ul>
<p>A classe de um objeto define como o R vai tratá-lo:</p>
<ul>
<li>fatores serão armazenados como números inteiros, mas serão representados por rótulos de texto sempre que o usuário desejar ver seu conteúdo.</li>
<li>datas serão armazenadas como números de segundos, mas serão representadas em formato de data/hora legível por pessoas.</li>
<li>matrizes codificam operações como transposição e multiplicação de matrizes que não funcionam em outros tipos de dado</li>
</ul>
<p>Esses são apenas alguns exemplos de classe, mas acho que deu pra pegar a ideia.</p>
</li>
<li>
<p>Digamos que você quer armazenar algumas informações na memória do computador. Que tipo de objeto você utilizaria para armanzenar:</p>
<ul>
<li>Os nomes dos colegas da sua turma</li>
<li>Seus números de telefone</li>
<li>Uma variável que indica se esta pessoa nasceu antes de 1989</li>
<li>A idade de um grupo de pessoas</li>
<li>Informações de cadastro de uma pessoa: nome completo, afiliações, telefones para contato, endereços, etc.</li>
<li>Uma coleção de funções que você utiliza frequentemente</li>
</ul>
</li>
</ol>
<p>Você pode armazenar valores em vetores atômicos, então nomes de colegas poderiam ficar num vetor de caracteres, números de telefone num vetor de números inteiros, uma variável que indica se alguém nasceu antes de 1989 ou depois é perfeita para um vetor lógico.</p>
<p>A idade de um grupo de pessoas já parece conter mais de uma informação por observação, então ela pode ser armazenada em um data.frame, contendo a identificação da pessoa e a sua idade.</p>
<p>Um caso parecido, mas levemente diferente são as informações de cadastro de uma pessoa, que deveriam ser armazenadas numa lista, pois o cadastro pode conter informações de diferentes formatos e tamanhos e não necessariamente teria o formato retangular do data.frame.</p>
<p>Uma coleção de funções deve ser armazenadas numa lista, pois este é objeto R adequado para armazenar tudo que não for uma coleção de informações como num vetor atômico.</p>
<ol start="3">
<li>Porque no resumo eu disse que as funções são verbos? Que tipo de ações as funções que vimos na aula fazem nos nossos objetos? Se as funções são verbos, que classe de palavras a gente poderia dizer que são os nossos objetos? E nós, que usamos o software, o que somos?</li>
</ol>
<p>Se você parar para pensar, programação de computadores é uma forma de comunicação envolvendo pelo menos 3 interlocutores: você, a máquina e outros programadores. Na sintaxe do português, as frases são divididas em sujeito e predicado, sendo que o predicado geralmente tem um verbo e alguns complementos opcionais. O sujeito de uma frase na programação geralmente está oculto, pois ele é implicitamente você, que pede que a máquina execute tarefas. O verbo são as funções, que indicam à máquina que ações deverão ser executadas, e os complementos são os argumentos da função, em geral, objetos contendo informações, bem como opções (adjetivos, advérbios) que descrevem não apenas EM QUEM as tarefas serão executadas, mas também COMO.</p>
<ol start="4">
<li>Digamos que eu quero armazenar as informações de cadastro dos membros da turma. Que estrutura de dados eu deveria utilizar? Como você implementaria esta estrutura no R? Desenvolva um pequeno exemplo.</li>
</ol>
<p>Você deveria utilizar um data frame para guardar as várias informações de cadastro da turma. Note que é um pouco diferente do exemplo acima, em que eu tenho o cadastro de uma pessoa. Em geral, parte do processo de tabulação de um banco de dados é coletar informações que estão em formatos díspares e transformá-las em algo que pode ser analisado com facilidade, ou seja, um data frame.</p>
<pre><code class="language-r">df &lt;- data.frame(nome = c(&quot;Fulano&quot;, &quot;Beltrano&quot;),
                 telefone = c(123456, 456321),
                 endereco = c(&quot;Onde Judas perdeu as botas&quot;, &quot;Duas ruas pra baixo&quot;),
                 sexo = c(&quot;M&quot;, &quot;F&quot;),
                 email = c(&quot;fulano@email.com&quot;, &quot;beltrano@nomail.com&quot;), 
                 uf = c(&quot;SP&quot;, &quot;RN&quot;), 
                 cidade = c(&quot;Borá&quot;, &quot;São Miguel do Gostoso&quot;))

df
</code></pre>
<pre><code>##       nome telefone                   endereco sexo               email uf
## 1   Fulano   123456 Onde Judas perdeu as botas    M    fulano@email.com SP
## 2 Beltrano   456321        Duas ruas pra baixo    F beltrano@nomail.com RN
##                  cidade
## 1                  Borá
## 2 São Miguel do Gostoso
</code></pre>
<p>Em geral, não é comum construir bancos de dados no R, existem softwares com facilidades melhores para a digitação de informações. O exemplo acima apenas demonstra minimamente o resultado do que, provavelmente, seria uma importação de um cadastro já salvo.</p>
<ol start="5">
<li>Quais são os atributos de um data frame? Como você poderia descobrí-los e alterá-los? Em que situações isso seria proveitoso?</li>
</ol>
<p>Usando o data frame construído no exercício anterior, podemos verificar seus atributos:</p>
<pre><code class="language-r">attributes(df)
</code></pre>
<pre><code>## $names
## [1] &quot;nome&quot;     &quot;telefone&quot; &quot;endereco&quot; &quot;sexo&quot;     &quot;email&quot;    &quot;uf&quot;       &quot;cidade&quot;  
## 
## $class
## [1] &quot;data.frame&quot;
## 
## $row.names
## [1] 1 2
</code></pre>
<p>Podemos alterar esses atributos usando a forma <code>&lt;-</code> da mesma função:</p>
<pre><code class="language-r">attributes(df) &lt;- list(row.names = c(&quot;Oi&quot;, &quot;Td bem?&quot;),
                       names = c(&quot;Nome&quot;, &quot;Telefone&quot;, &quot;Endereço&quot;, &quot;Sexo&quot;, &quot;Email&quot;, &quot;Uf&quot;, &quot;Cidade&quot;),
                       class = &quot;data.frame&quot;)
df
</code></pre>
<pre><code>##             Nome Telefone                   Endereço Sexo               Email
## Oi        Fulano   123456 Onde Judas perdeu as botas    M    fulano@email.com
## Td bem? Beltrano   456321        Duas ruas pra baixo    F beltrano@nomail.com
##         Uf                Cidade
## Oi      SP                  Borá
## Td bem? RN São Miguel do Gostoso
</code></pre>
<p>Em geral, no entanto, evitamos usar essa última forma e usamos as funções acessórias para modificar os atributos sem bagunçar nosso objeto! Se você não especificar TODOS os atributos na lista, ele vai desmanchar sua festa&hellip; Por isso, preferimos alterar cada um individualmente:</p>
<pre><code class="language-r">row.names(df) &lt;- c(1, 2)
df
</code></pre>
<pre><code>##       Nome Telefone                   Endereço Sexo               Email Uf
## 1   Fulano   123456 Onde Judas perdeu as botas    M    fulano@email.com SP
## 2 Beltrano   456321        Duas ruas pra baixo    F beltrano@nomail.com RN
##                  Cidade
## 1                  Borá
## 2 São Miguel do Gostoso
</code></pre>
<p>Em geral, é proveitoso alterar atributos de um objeto como seus nomes para facilitar a legibilidade do código e a digitação. Outros atributos mais consequentes como a classe, em geral, não é proveitoso alterar diretamente. As funções que criam e manipulam objetos costumam modificar a classe de um objeto automaticamente e da forma correta, e não precisamos nos preocupar com isso. No entanto, é útil saber a classe de um objeto pois isto pode nos ajudar a identificar a origem de um erro. Há um exemplo na aula 2 em que tentamos tirar a média de um valor que está salvo num data frame incorretamente.</p>
<pre><code class="language-r">df &lt;- data.frame(idade = c(20, 30, 40, 50))

mean(df[&quot;idade&quot;])
</code></pre>
<pre><code>## Warning in mean.default(df[&quot;idade&quot;]): argumento não é numérico nem lógico:
## retornando NA
</code></pre>
<pre><code>## [1] NA
</code></pre>
<p>O código não funciona, pois estamos tentando tirar a média de uma lista:</p>
<pre><code class="language-r">typeof(df[&quot;idade&quot;])
</code></pre>
<pre><code>## [1] &quot;list&quot;
</code></pre>
<p>Para tirar uma média, precisamos acessar os valores que estão no vetor atômico guardado dentro da lista:</p>
<pre><code class="language-r">df[[&quot;idade&quot;]]
</code></pre>
<pre><code>## [1] 20 30 40 50
</code></pre>
<pre><code class="language-r">typeof(df[[&quot;idade&quot;]])
</code></pre>
<pre><code>## [1] &quot;double&quot;
</code></pre>
<pre><code class="language-r"># ou

df$idade
</code></pre>
<pre><code>## [1] 20 30 40 50
</code></pre>
<pre><code class="language-r">typeof(df$idade)
</code></pre>
<pre><code>## [1] &quot;double&quot;
</code></pre>
<p>Agora sim:</p>
<pre><code class="language-r">mean(df$idade)
</code></pre>
<pre><code>## [1] 35
</code></pre>
<pre><code class="language-r">mean(df[[&quot;idade&quot;]])
</code></pre>
<pre><code>## [1] 35
</code></pre>
<ol start="6">
<li>Suponha que você têm o vetor atômico abaixo:</li>
</ol>
<pre><code class="language-r">v &lt;- c(1, 1, TRUE, FALSE)
</code></pre>
<p>O que acontecerá com as informações desse vetor ao ser armazenado no R? Como você poderia alterar esse resultado? Porque o R se comporta dessa maneira?</p>
<p>Como já discutido anteriormente, os valores <code>TRUE/FALSE</code> serão coagidos a <code>1/0</code>, e você pode usar as funções <code>as._____</code> para converter para o formato desejado.</p>
<pre><code class="language-r">as.logical(v)
</code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE
</code></pre>
<p>O R se comporta dessa maneira pois ele visa preservar as informações no formato mais genérico possível.</p>
<ol start="7">
<li>Considere a operação matemática abaixo:</li>
</ol>
<pre><code class="language-r">v1 &lt;- c(1, 2, 3)
v2 &lt;- c(10, 20, 30, 40, 50, 60, 70, 80, 90, 100)

v1 * v2
</code></pre>
<p>O que você espera encontrar na saída do R ao rodar essa seção? Rode o código e responda: você se surpreendeu? O que aconteceu e porquê? Qual o significado da mensagem de aviso?</p>
<p>Antes de rodar, você já deve ter notado que estamos fazendo uma multiplicação de cada elemento do vetor 1 por cada elemento do vetor 2, porém, eles tem tamanhos distintos. Não nos deve surpreender então que o R recicle os argumentos do vetor menor até dar o tamanho do vetor maior. Como o comprimento do v2 não é múltiplo de v1, recebemos um aviso, mas mesmo que não recebamos esse aviso, precisamos estar atentos a reciclagens que não fizemos intencionalmente!</p>
<ol start="8">
<li>Considere o banco de dados abaixo:</li>
</ol>
<pre><code class="language-r">sala &lt;- data.frame(
  id = c(1, 2, 3),
  idade = c(20, 25, 30, 35, 40, 45),
  nome = c(&quot;Fulano&quot;, &quot;Cicrano&quot;, &quot;Beltrano&quot;, &quot;Herculano&quot;, &quot;Mariano&quot;, &quot;Carrano&quot;),
  sexo = &quot;Masculino&quot;,
  origem = c(&quot;Campinas&quot;, &quot;Barueri&quot;, &quot;Monte Verde&quot;, &quot;Rio de Janeiro&quot;, &quot;Natal&quot;, &quot;Belo Horizonte&quot;)
)
</code></pre>
<p>Verifique as variáveis <code>id</code> e <code>sexo</code>. Os valores dessas variáveis fazem sentido? Elas não impedem a construção do data frame, por quê? Que característica do R está operando nessas variáveis?</p>
<p>O valor da variável id está incorreto, pois temos ids repetidas para pessoas diferentes. O valor da variável sexo está correto, aparentemente, de acordo com a variável nome. Em ambos os casos, R está reciclando os vetores mais curtos para preencher os espaços vazios e criar um data frame completo. A variável id precisa ser corrigida, pois a reciclagem aqui está prejudicando a consistência da informação, mas no caso de sexo, é um uso válido da regra da reciclagem para evitar repetição.</p>
<h2 id="aula-2-manipulação-de-dados">Aula 2: Manipulação de dados</h2>
<h3 id="leituraimportação">Leitura/Importação</h3>
<p>Visualize os dados que você acabou de importar em formato de planilha através do Environment e usando a função View().
É possível também visualizar as 6 primeiras linhas do data.frame ou as 6 últimas linhas. Para isso, use as funções head() e tail().</p>
<p>Obs: se você quiser ver mais que 6 linhas, coloque o segundo argumento na função head(df, 10). Quantas linhas vão ser mostradas neste caso?</p>
<pre><code class="language-r">url &lt;- &quot;https://raw.githubusercontent.com/laddem/site/master/amostra_pnad.csv&quot;
df &lt;- read.csv(url)
</code></pre>
<pre><code class="language-r">View(df)
</code></pre>
<pre><code class="language-r">head(df, 10)
</code></pre>
<pre><code>##     Ano Trimestre               UF  V1022  V2007 V2009   V2010 VD2003
## 1  2021         1            Ceará Urbana  Homem    80  Branca      2
## 2  2021         1 Distrito Federal Urbana Mulher    19   Parda      4
## 3  2021         1       Pernambuco Urbana Mulher    36   Preta      2
## 4  2021         1   Santa Catarina Urbana  Homem    50   Parda      2
## 5  2021         1        São Paulo Urbana Mulher    43   Parda      3
## 6  2021         1            Goiás Urbana  Homem    35   Parda      3
## 7  2021         1            Amapá Urbana  Homem    72   Parda      3
## 8  2021         1        São Paulo Urbana Mulher    23 Amarela      8
## 9  2021         1 Distrito Federal Urbana  Homem    23   Parda      5
## 10 2021         1         Maranhão  Rural  Homem    47   Parda      9
##                       VD3005 VD4016
## 1  16 anos ou mais de estudo     NA
## 2          11 anos de estudo     NA
## 3          12 anos de estudo   1045
## 4           5 anos de estudo   1500
## 5           9 anos de estudo   1600
## 6          14 anos de estudo   3000
## 7  16 anos ou mais de estudo     NA
## 8          12 anos de estudo   1200
## 9          14 anos de estudo   1200
## 10          5 anos de estudo   2000
</code></pre>
<pre><code class="language-r">tail(df)
</code></pre>
<pre><code>##       Ano Trimestre             UF  V1022  V2007 V2009  V2010 VD2003
## 995  2021         1          Bahia  Rural Mulher    15  Preta      3
## 996  2021         1       Amazonas  Rural Mulher    32  Parda      3
## 997  2021         1       Maranhão Urbana  Homem    69  Parda      3
## 998  2021         1          Ceará Urbana  Homem    33 Branca      6
## 999  2021         1          Goiás Urbana  Homem    58  Parda      3
## 1000 2021         1 Santa Catarina  Rural  Homem    66 Branca      2
##                         VD3005 VD4016
## 995           8 anos de estudo     NA
## 996          12 anos de estudo     NA
## 997           3 anos de estudo     NA
## 998          12 anos de estudo   1000
## 999  16 anos ou mais de estudo   7000
## 1000          5 anos de estudo   1000
</code></pre>
<p>Exercício apenas para vocês se familiarizem com as formas de ver o conteúdo de bancos de dados em R. A função View() é útil para bancos pequenos, mas tem performance ruim para bancos com muitas informações. head() e tail() são ótimas formas de verificar a forma geral do banco de dados sem precisar sobrecarregar seu computador.</p>
<h3 id="selecionando-valores">Selecionando valores</h3>
<p>Retorne a informação da observação 800, e as colunas Ano, VD3005, V2009, V2010 do nosso data frame da amostra da pnad. O que o R retornará? Faça a mesma indexação usando inteiros positivos ou inteiros negativos.</p>
<pre><code class="language-r">df[800, c(1, 8, 6, 7)]
</code></pre>
<pre><code>##      Ano VD2003 V2009  V2010
## 800 2021      3    45 Branca
</code></pre>
<pre><code class="language-r">df[-c(1:799, 801:1000), -c(2:5, 9, 10)]
</code></pre>
<pre><code>##      Ano V2009  V2010 VD2003
## 800 2021    45 Branca      3
</code></pre>
<p>Aqui, o objetivo era praticar a seleção de linhas e colunas usando inteiros positivos e negativos. É meio trabalhoso e nem sempre é a forma mais eficiente, mas é ocasionalmente útil. Note o uso de vetores tanto no caso de seleções positivas quanto de negativas e de sequências com <code>:</code> para facilitar a digitação.</p>
<h4 id="diferentes-seleções--e-">Diferentes seleções: <code>[[</code> e <code>$</code></h4>
<p>Assim como na lista, é possível usar os colchetes <code>[[ ]]</code> em data frame. Tente usá-los no data frame da pnad. Quais são as diferenças encontradas?</p>
<pre><code class="language-r">df[[1]]
</code></pre>
<pre><code>##    [1] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [15] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [29] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [43] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [57] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [71] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [85] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [99] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [113] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [127] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
....
Saída truncada para visualização
</code></pre>
<pre><code class="language-r">df[[6]]
</code></pre>
<pre><code>##    [1]  80  19  36  50  43  35  72  23  23  47  71  16  48  13  25   3  27  83
##   [19]  55  79  14  80  20  21  22  69  57  27  63  35  28  41  39  71   7  45
##   [37]  11   9  48  14  48  47   5  36  25  55   8  64   7  58  30   1  18  44
##   [55]  45  17   9  24  11  11  71  75  49  20  55  31  60   2   7  81  68  15
##   [73]  31   2  44  40  49  55   9  40  55   0  35  32   7  63  62  54  48   5
##   [91]  46  49  20  90  16   0  41  15  67  26  22  18  58  63   0  31  14  39
##  [109]  34  44  61  48  47  29  43  65  10  36  20   7  28  18  23  75  37  49
##  [127]  45   3  61  54  38  50  41  47  39  44  32  27  66  55  70  69  41  31
##  [145]  38  91  62  30  21  59   4  29   5  24  83   6  15  38  20  89  85  44
##  [163]  73   7  49  22  33   5  18   4  27  22   0  21  74  26  58  52  77  36
....
Saída truncada para visualização
</code></pre>
<pre><code class="language-r">df[[&quot;Ano&quot;]]
</code></pre>
<pre><code>##    [1] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [15] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [29] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [43] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [57] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [71] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [85] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [99] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [113] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [127] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
....
Saída truncada para visualização
</code></pre>
<pre><code class="language-r">df[[&quot;V2009&quot;]]
</code></pre>
<pre><code>##    [1]  80  19  36  50  43  35  72  23  23  47  71  16  48  13  25   3  27  83
##   [19]  55  79  14  80  20  21  22  69  57  27  63  35  28  41  39  71   7  45
##   [37]  11   9  48  14  48  47   5  36  25  55   8  64   7  58  30   1  18  44
##   [55]  45  17   9  24  11  11  71  75  49  20  55  31  60   2   7  81  68  15
##   [73]  31   2  44  40  49  55   9  40  55   0  35  32   7  63  62  54  48   5
##   [91]  46  49  20  90  16   0  41  15  67  26  22  18  58  63   0  31  14  39
##  [109]  34  44  61  48  47  29  43  65  10  36  20   7  28  18  23  75  37  49
##  [127]  45   3  61  54  38  50  41  47  39  44  32  27  66  55  70  69  41  31
##  [145]  38  91  62  30  21  59   4  29   5  24  83   6  15  38  20  89  85  44
##  [163]  73   7  49  22  33   5  18   4  27  22   0  21  74  26  58  52  77  36
....
Saída truncada para visualização
</code></pre>
<p>Os colchetes duplos <code>[[</code> funcionam no data frame porque ele é, por debaixo do capô, uma lista. Eles retornam os vetores que compõem o nosso data frame e permitem a realização de operações com vetores. São diferentes dos colchetes simples <code>[</code>, que retornarão listas/data frames menores, contendo apenas as partes que você selecionar. Lembrem-se da metáfora do trem!</p>
<h3 id="modificando-valores">Modificando valores</h3>
<h4 id="modificando-os-valores-diretamente">Modificando os valores diretamente</h4>
<p>Considere o vetor abaixo. Atribua um novo valor na posição 3 deste vetor. É possível atribuir uma string no lugar de um número?</p>
<pre><code class="language-r">vetor_x&lt;- c(10,30,50,10)

vetor_x[3] &lt;- 70

vetor_x
</code></pre>
<pre><code>## [1] 10 30 70 10
</code></pre>
<p>A atribuição em si é um processo relativamente simples. Vamos ver o que acontece se atribuímos um texto.</p>
<pre><code class="language-r">vetor_x[3] &lt;- &quot;Texto&quot;

vetor_x
</code></pre>
<pre><code>## [1] &quot;10&quot;    &quot;30&quot;    &quot;Texto&quot; &quot;10&quot;
</code></pre>
<p>R usa suas regras de coerção para preservar as informações e transforma os valores numéricos em texto.</p>
<h4 id="modificando-com-testes-lógicos">Modificando com testes lógicos</h4>
<p>Extraia a coluna <code>V2010</code> do <code>df2</code> e teste os valores igual a &lsquo;Branca&rsquo;. Além disso conte quantas linhas são iguais a &lsquo;Branca&rsquo;. Dica: use a função sum() para fazer a contagem.</p>
<pre><code class="language-r"># Cópia de df
df2 &lt;- df

sum(df2$V2010 == &quot;Branca&quot;)
</code></pre>
<pre><code>## [1] 407
</code></pre>
<p>Usamos um teste lógico no vetor <code>df2$V2010</code> para criar um vetor de valores lógicos <code>TRUE/FALSE</code> e as regras de coerção do R para fazer a soma dos valores verdadeiros <code>1</code> e descobrimos que 407 pessoas da amostra são brancas.</p>
<h4 id="valores-desconhecidos">Valores desconhecidos</h4>
<p>Conte o número de NAs na coluna <code>VD4016</code> do data frame <code>df2</code>.</p>
<pre><code class="language-r">sum(is.na(df2$VD4016))
</code></pre>
<pre><code>## [1] 613
</code></pre>
<p>Usando a mesma lógica do exercício anterior, porém, usando a função <code>is.na()</code> no lugar de <code>==</code> por causa do comportamento especial de valores <code>NA</code> em R.</p>
<h3 id="revisão-1">Revisão</h3>
<p>Para os próximos exercícios considere o data frame da pnad que estamos usando nas aulas.</p>
<ol>
<li>Como você selecionaria o mesmo valor abaixo, mas usando inteiros negativos na seleção?</li>
</ol>
<pre><code class="language-r">df2[1,5]
</code></pre>
<pre><code>## [1] &quot;Homem&quot;
</code></pre>
<pre><code class="language-r">df2[-(2:1000), -c(1:4, 6:20)]
</code></pre>
<pre><code>## [1] &quot;Homem&quot;
</code></pre>
<p>Exercício maroto, apenas para vocês botarem a cabeça para trabalhar e lembrarem de usar <code>:</code> ao invés de digitar milhares de números.</p>
<ol start="2">
<li>Qual a diferença em usar em selecionar determinada informação em um data frame usando colchetes duplos <code>[[]]</code> e usando colchetes simples? Observe o exemplo abaixo para responder:</li>
</ol>
<pre><code class="language-r">df2[['Ano']]
</code></pre>
<pre><code>##    [1] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [15] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [29] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [43] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [57] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [71] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [85] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [99] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [113] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [127] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
....
Saída truncada para visualização
</code></pre>
<pre><code class="language-r">df['Ano']
</code></pre>
<pre><code>##       Ano
## 1    2021
## 2    2021
## 3    2021
## 4    2021
## 5    2021
## 6    2021
## 7    2021
## 8    2021
## 9    2021
....
Saída truncada para visualização
</code></pre>
<p>A diferença é o tipo da saída do R e o que você pode fazer com ela:</p>
<pre><code class="language-r"># Vetor!
typeof(df2[['Ano']])
</code></pre>
<pre><code>## [1] &quot;integer&quot;
</code></pre>
<pre><code class="language-r">class(df2[['Ano']])
</code></pre>
<pre><code>## [1] &quot;integer&quot;
</code></pre>
<pre><code class="language-r"># Lista/data.frame!
typeof(df2['Ano'])
</code></pre>
<pre><code>## [1] &quot;list&quot;
</code></pre>
<pre><code class="language-r">class(df2['Ano'])
</code></pre>
<pre><code>## [1] &quot;data.frame&quot;
</code></pre>
<pre><code class="language-r"># Funciona!
mean(df2[['Ano']])
</code></pre>
<pre><code>## [1] 2021
</code></pre>
<pre><code class="language-r"># Erro!
mean(df2['Ano'])
</code></pre>
<pre><code>## Warning in mean.default(df2[&quot;Ano&quot;]): argumento não é numérico nem lógico:
## retornando NA
</code></pre>
<pre><code>## [1] NA
</code></pre>
<ol start="3">
<li>Considere o data frame abaixo:</li>
</ol>
<pre><code class="language-r">sala &lt;- data.frame(
   id = c(1, 2, 3, 4, 5, 6),
   idade = c(20, 25, 30, 35, 40, 45),
   nome = c(&quot;Fulano&quot;, &quot;Cicrano&quot;, &quot;Beltrano&quot;, &quot;Herculano&quot;, &quot;Mariano&quot;, &quot;Carrano&quot;),
   sexo = &quot;Masculino&quot;,
   origem = c(&quot;Campinas&quot;, &quot;Barueri&quot;, &quot;Monte Verde&quot;, &quot;Rio de Janeiro&quot;, &quot;Natal&quot;, &quot;Belo Horizonte&quot;)
)
</code></pre>
<p>Modifique o nome de &lsquo;Mariano&rsquo; por &lsquo;Mariana&rsquo;. E altere a variável sexo para que seja um vetor que altere o valor para &lsquo;Feminino&rsquo; na posição em que o nome foi trocado para Mariana.</p>
<pre><code class="language-r"># Ver a informação
sala[sala$nome == &quot;Mariano&quot;, &quot;nome&quot;]
</code></pre>
<pre><code>## [1] &quot;Mariano&quot;
</code></pre>
<pre><code class="language-r">sala[sala$nome == &quot;Mariana&quot;, &quot;sexo&quot;]
</code></pre>
<pre><code>## character(0)
</code></pre>
<pre><code class="language-r"># Modificar a informação
sala[sala$nome == &quot;Mariano&quot;, &quot;nome&quot;] &lt;- &quot;Mariana&quot;
sala[sala$nome == &quot;Mariana&quot;, &quot;sexo&quot;] &lt;- &quot;Feminino&quot;

# Checar o resultado
sala
</code></pre>
<pre><code>##   id idade      nome      sexo         origem
## 1  1    20    Fulano Masculino       Campinas
## 2  2    25   Cicrano Masculino        Barueri
## 3  3    30  Beltrano Masculino    Monte Verde
## 4  4    35 Herculano Masculino Rio de Janeiro
## 5  5    40   Mariana  Feminino          Natal
## 6  6    45   Carrano Masculino Belo Horizonte
</code></pre>
<p>Vocês podiam utilizar uma seleção por números inteiros, porque o banco é pequeno, mas optei por fazer o exercício usando testes lógicos, porque é um caso mais geral e serve para mais de uma posição.</p>
<ol start="4">
<li>
<p>Considere o mesmo data frame sala construído no exercício anterior. Usando testes lógicos e operadores Booleanos. Verifique:</p>
<p>a. se existe algum aluno que seja do sexo Masculino e seja de São Paulo.<br>
b. se existe algum aluno que tem idade maior ou igual a 20 anos ou que seja de Campinas. 
c. se existe alguém com o nome Beltrano.</p>
</li>
</ol>
<pre><code class="language-r"># a. se existe algum aluno que seja do sexo Masculino e seja de São Paulo.
sala[sala$origem == &quot;São Paulo&quot;, ]
</code></pre>
<pre><code>## [1] id     idade  nome   sexo   origem
## &lt;0 linhas&gt; (ou row.names de comprimento 0)
</code></pre>
<pre><code class="language-r"># b. se existe algum aluno que tem idade maior ou igual a 20 anos ou que seja de Campinas. 
sala[sala$idade &gt;= 20 &amp; sala$origem == &quot;Campinas&quot;, ]
</code></pre>
<pre><code>##   id idade   nome      sexo   origem
## 1  1    20 Fulano Masculino Campinas
</code></pre>
<pre><code class="language-r"># c. se existe alguém com o nome Beltrano.
sala[sala$nome == &quot;Beltrano&quot;, ]
</code></pre>
<pre><code>##   id idade     nome      sexo      origem
## 3  3    30 Beltrano Masculino Monte Verde
</code></pre>
<p>Exercício para exercitar os músculos de testes lógicos dentro de bancos de dados!</p>
<ol start="5">
<li>Agora considere o seguinte data frame e, usando as funções apropriadas ensinadas na aula de hoje, responda:</li>
</ol>
<pre><code class="language-r">cadastro &lt;- data.frame(
   id     = c(10, 105, 299, 645, 7907, 8660, 4992, 630),
   idade  = c(20, 25, 30, 35, 40, 45, 60, 53),
   nome   = c(&quot;Thais&quot;, NA, &quot;Guilherme&quot;, &quot;Betânia&quot;, &quot;Ana Lucia&quot;, NA, NA, &quot;Pâmela&quot;),
   sexo   = c(&quot;Feminino&quot;, &quot;Masculino&quot;,&quot;Masculino&quot;, 
              NA ,NA, &quot;Feminino&quot;, &quot;Masculino&quot;, &quot;Feminino&quot;),
   origem = c(&quot;Campinas&quot;, NA, &quot;Monte Verde&quot;, &quot;Rio de Janeiro&quot;,
              NA, &quot;Belo Horizonte&quot;,&quot;São Paulo&quot;, &quot;Rio de Janeiro&quot;)
)
</code></pre>
<ol>
<li>Quantos NAs existe na coluna nome?</li>
<li>Quantos NAs existe na coluna sexo?</li>
<li>Quantos NAs existe na coluna origem?</li>
<li>Substitua os NAs na coluna sexo pelo valor &lsquo;Feminino&rsquo;</li>
</ol>
<pre><code class="language-r"># 1. Quantos NAs existem na coluna nome?
sum(is.na(cadastro$nome))
</code></pre>
<pre><code>## [1] 3
</code></pre>
<pre><code class="language-r"># 2. Quantos NAs existem na coluna sexo?
sum(is.na(cadastro$sexo))
</code></pre>
<pre><code>## [1] 2
</code></pre>
<pre><code class="language-r"># 3. Quantos NAs existem na coluna origem?
sum(is.na(cadastro$origem))
</code></pre>
<pre><code>## [1] 2
</code></pre>
<pre><code class="language-r"># 4. Substitua os NAs na coluna sexo pelo valor 'Feminino'

     # Ver os dados
     cadastro[is.na(cadastro$sexo), ]
</code></pre>
<pre><code>##     id idade      nome sexo         origem
## 4  645    35   Betânia &lt;NA&gt; Rio de Janeiro
## 5 7907    40 Ana Lucia &lt;NA&gt;           &lt;NA&gt;
</code></pre>
<pre><code class="language-r">     # Modificar
     cadastro[is.na(cadastro$origem), &quot;sexo&quot;] &lt;- &quot;Feminino&quot;

     # Ver o resultado
     cadastro
</code></pre>
<pre><code>##     id idade      nome      sexo         origem
## 1   10    20     Thais  Feminino       Campinas
## 2  105    25      &lt;NA&gt;  Feminino           &lt;NA&gt;
## 3  299    30 Guilherme Masculino    Monte Verde
## 4  645    35   Betânia      &lt;NA&gt; Rio de Janeiro
## 5 7907    40 Ana Lucia  Feminino           &lt;NA&gt;
## 6 8660    45      &lt;NA&gt;  Feminino Belo Horizonte
## 7 4992    60      &lt;NA&gt; Masculino      São Paulo
## 8  630    53    Pâmela  Feminino Rio de Janeiro
</code></pre>
<ol start="6">
<li>Salve o data frame &lsquo;cadastro&rsquo; do exercicio anterior em um arquivo <code>.csv</code>. Como você faria isso? Quais os argumentos que devem ser usados?</li>
</ol>
<pre><code class="language-r">write.csv(cadastro, &quot;cadastro.csv&quot;, row.names = FALSE)
</code></pre>
<p>Só para relembrar o uso da função <code>write.csv</code>. Não deixem de consultar também as funções <code>?read.table</code>, <code>?write.table</code>, <code>?read.csv2</code>, <code>?write.csv2</code>, <code>?read.fwf</code> e <code>?write.fwf</code>. Essas funções permitem ler a maior parte dos dados em formato texto que vocês encontrarão nas suas vidas como analistas ou pesquisadores, que utilizam convenções como separadores de colunas (<code>;</code>, <code>,</code>, <code>\t</code>, <code>&quot; &quot;</code>), separadores de casas decimais (<code>,</code>, <code>.</code>), caracteres de escape (<code>\</code>, <code>&quot;</code>), codificação de caracteres acentuados (&ldquo;UTF-8&rdquo;, &ldquo;Windows-1252&rdquo;, etc.) e outras questões similares.</p>
<hr>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/courses/rbase/dia3/" rel="next">Estatística e visualização: analisando seus dados e obtendo resultados</a>
  </div>
  
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on 15 Jun 2021</p>

          





          




          


  
  



        </div>

      </article>

      <footer class="site-footer">

  

  

  
  <p class="powered-by">
    © 2021 LADDEM
  </p>
  

  
  






  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/latex.min.js"></script>
        
      

    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.8b7df62fd2da18ce73e29c13cc0a6198.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/en/js/wowchemy.min.71e713848164e269bc250f377042949d.js"></script>

    
  <script async defer src="https://buttons.github.io/buttons.js"></script>




</body>
</html>
