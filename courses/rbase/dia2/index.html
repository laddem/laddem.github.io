<!DOCTYPE html><html lang="pt" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.1.0 for Hugo" />
  

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="LADDEM" />

  
  
  
    
  
  <meta name="description" content="Primeiros passos: trabalhando com bancos de dados em R" />

  
  <link rel="alternate" hreflang="pt" href="https://laddem.github.io/courses/rbase/dia2/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="rgb(251, 191, 183)" />
  

  
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/purebasic.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/purebasic.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Cutive+Mono&family=Lora:wght@400;700&family=Roboto:wght@400;700&display=swap&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cutive+Mono&family=Lora:wght@400;700&family=Roboto:wght@400;700&display=swap&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.46f8102c91669d08bf92f59f6531234a.css" />

  



  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://laddem.github.io/courses/rbase/dia2/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="LADDEM" />
  <meta property="og:url" content="https://laddem.github.io/courses/rbase/dia2/" />
  <meta property="og:title" content="Manipulação de objetos em R | LADDEM" />
  <meta property="og:description" content="Primeiros passos: trabalhando com bancos de dados em R" /><meta property="og:image" content="https://laddem.github.io/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_300x300_fit_lanczos_2.png" />
    <meta property="twitter:image" content="https://laddem.github.io/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_300x300_fit_lanczos_2.png" /><meta property="og:locale" content="pt" />
  
    
      <meta
        property="article:published_time"
        content="2021-06-15T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2021-06-15T00:00:00&#43;00:00">
  

  



  

  

  





  <title>Manipulação de objetos em R | LADDEM</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="12939f5bfef311db6bdd7d2b8245828b" >

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.f16be01fc8fb2b5885dd67ce942d1185.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_0x70_resize_lanczos_2.png" alt="LADDEM"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu21999b1509efcb95cf9a1f4a62aafaa3_109704_0x70_resize_lanczos_2.png" alt="LADDEM"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Sobre</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/courses/"><span>Cursos</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contato</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    





<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          R-base
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li><a href="/courses/"><i class="fas fa-arrow-left pr-1"></i>Cursos</a></li>
      </ul>

      
      
        
          
        
      


  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/courses/rbase/">R-base</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/courses/rbase/dia1/">Básico</a></li>



  <li class="active"><a href="/courses/rbase/dia2/">Manipulando dados</a></li>

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      

      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#manipulação-de-objetos">Manipulação de objetos</a>
      <ul>
        <li><a href="#leituraimportação">Leitura/Importação</a></li>
        <li><a href="#escritasalvar">Escrita/Salvar</a></li>
      </ul>
    </li>
    <li><a href="#notação">Notação</a>
      <ul>
        <li><a href="#selecionando-valores">Selecionando valores</a></li>
        <li><a href="#diferentes-seleções--e-">Diferentes seleções: <code>[[</code> e <code>$</code></a></li>
      </ul>
    </li>
    <li><a href="#modificando-valores">Modificando valores</a>
      <ul>
        <li><a href="#modificando-os-valores-diretamente">Modificando os valores diretamente</a></li>
        <li><a href="#modificando-com-testes-lógicos">Modificando com testes lógicos</a></li>
        <li><a href="#valores-desconhecidos">Valores desconhecidos</a></li>
      </ul>
    </li>
    <li><a href="#revisão">Revisão</a>
      <ul>
        <li><a href="#exercícios-6">Exercícios</a></li>
      </ul>
    </li>
  </ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          
            
  <nav class="d-none d-md-flex" aria-label="breadcrumb">
    <ol class="breadcrumb">
      
  
  
  

  <li class="breadcrumb-item">
    <a href="/">
      
        Home
      
    </a>
  </li>


  <li class="breadcrumb-item">
    <a href="/courses/">
      
        Cursos
      
    </a>
  </li>


  <li class="breadcrumb-item">
    <a href="/courses/rbase/">
      
        R-base
      
    </a>
  </li>


      <li class="breadcrumb-item active" aria-current="page">
        Manipulando dados
      </li>
    </ol>
  </nav>


          

          <h1>Manipulação de objetos em R</h1>

          <div class="article-style">
            <h2 id="manipulação-de-objetos">Manipulação de objetos</h2>
<h3 id="leituraimportação">Leitura/Importação</h3>
<p>Você pode importar um data.frame para o R de duas formas. A primeira delas, é carregando através do <code>Environment</code> no canto direito superior do RStudio. Clique em Import Dataset e selecione &lsquo;From Text File&rsquo;</p>
<p>O RStudio solicitará que você selecione o arquivo que deseja importar e, em seguida, abrirá um assistente para ajudá-lo a importar os dados. Use o assistente para informar ao RStudio qual nome dar ao conjunto de dados. Você também pode usar o assistente para informar ao RStudio qual caractere o conjunto de dados usa como separador, qual caractere ele usa para representar decimais (geralmente um ponto nos Estados Unidos e uma vírgula na Europa/Brasil) e se o conjunto de dados vem ou não com uma linha de nomes de coluna (conhecida como cabeçalho). Para ajudá-lo, o assistente mostra a aparência do arquivo bruto, bem como a aparência dos dados carregados com base nas configurações de entrada.</p>
<p>Você também pode desmarcar a caixa “Strings como fatores” no assistente. Eu recomendo fazer isso. Se você fizer isso, o R carregará todas as suas cadeias de caracteres como cadeias de caracteres. Caso contrário, R os converterá em fatores.</p>
<p>A outra forma de importar um arquivo no R, é usando direto no script a função &lsquo;read.csv&rsquo;. Vamos trabalhar com os dados da pnad, no arquivo amostra_pnad.csv. Ele é um arquivo de valores separados por vírgula ou CSV para abreviar. CSVs são arquivos de texto simples, o que significa que você pode abri-los em um editor de texto (assim como em muitos outros programas). Se você abrir amostra_pnad.csv, verá que ele contém uma tabela de dados semelhante à seguinte. Cada linha da tabela é salva em sua própria linha e uma vírgula é usada para separar as células dentro de cada linha. Cada arquivo CSV compartilha este formato básico:</p>
<p>&ldquo;Ano&rdquo;,&ldquo;Trimestre&rdquo;,&ldquo;UF&rdquo;,&ldquo;V1022&rdquo;,&ldquo;V2007&rdquo;,&ldquo;V2009&rdquo;,&ldquo;V2010&rdquo;,&ldquo;VD2003&rdquo;,&ldquo;VD3005&rdquo;,&ldquo;VD4016&rdquo;
&ldquo;2021&rdquo;,&ldquo;1&rdquo;,&ldquo;Ceará&rdquo;,&ldquo;Urbana&rdquo;,&ldquo;Homem&rdquo;,80,&ldquo;Branca&rdquo;,2,&ldquo;16 anos ou mais de estudo&rdquo;,NA
&ldquo;2021&rdquo;,&ldquo;1&rdquo;,&ldquo;Distrito Federal&rdquo;,&ldquo;Urbana&rdquo;,&ldquo;Mulher&rdquo;,19,&ldquo;Parda&rdquo;,4,&ldquo;11 anos de estudo&rdquo;,NA
&hellip;e assim por diante</p>
<p>Vamos carregar novamente os dados da pnad que foram mostrados na aula passada:</p>
<pre><code class="language-r">url &lt;- &quot;https://raw.githubusercontent.com/laddem/site/master/amostra_pnad.csv&quot;
df &lt;- read.csv(url)
head(df)
</code></pre>
<pre><code>##    Ano Trimestre               UF  V1022  V2007 V2009  V2010 VD2003
## 1 2021         1            Ceará Urbana  Homem    80 Branca      2
## 2 2021         1 Distrito Federal Urbana Mulher    19  Parda      4
## 3 2021         1       Pernambuco Urbana Mulher    36  Preta      2
## 4 2021         1   Santa Catarina Urbana  Homem    50  Parda      2
## 5 2021         1        São Paulo Urbana Mulher    43  Parda      3
## 6 2021         1            Goiás Urbana  Homem    35  Parda      3
##                      VD3005 VD4016
## 1 16 anos ou mais de estudo     NA
## 2         11 anos de estudo     NA
## 3         12 anos de estudo   1045
## 4          5 anos de estudo   1500
## 5          9 anos de estudo   1600
## 6         14 anos de estudo   3000
</code></pre>
<p>Se a importação ocorrer corretamente, o data.frame irá aparecer no ambiente <code>Environment</code> mostrando o número de observações e o número de variáveis (colunas).</p>
<p>Quando você importa um conjunto de dados, o RStudio salva os dados em um data frame e, em seguida, exibe o data frame em uma guia Exibir. Você pode abrir qualquer data frame em uma guia Exibir a qualquer momento com a função View().</p>
<h4 id="exercícios">Exercícios</h4>
<p>Visualize os dados que você acabou de importar em formato de planilha através do Environment e usando a função View().
É possível também visualizar as 6 primeiras linhas do data.frame ou as 6 últimas linhas. Para isso, use as funções head() e tail().</p>
<p>Obs: se você quiser ver mais que 6 linhas, coloque o segundo argumento na função head(df, 10). Quantas linhas vão ser mostradas neste caso?</p>
<h3 id="escritasalvar">Escrita/Salvar</h3>
<p>Você pode salvar e exportar um novo arquivo .csv para o seu computador. Assim, você pode enviá-lo por e-mail a um colega, armazená-lo em um pen drive ou abri-lo em um programa diferente. Você pode salvar quaisquer dados executados e alterados no R em um arquivo .csv com o comando write.csv.</p>
<pre><code class="language-r">write.csv(df, file = &quot;df_pnad.csv&quot;, row.names = FALSE)
</code></pre>
<p>R transformará seu data frame em um arquivo de texto simples com o formato de valores separados por vírgula e salvará o arquivo em seu diretório de trabalho. Para ver onde está seu diretório de trabalho, execute <code>getwd()</code>. Para alterar a localização do seu diretório de trabalho, visite <em>Sessão &gt; Definir Diretório de Trabalho &gt; Escolher Diretório</em> na barra de menus do RStudio.</p>
<p>Você pode personalizar o processo de salvamento com o grande conjunto de argumentos opcionais de write.csv (consulte <code>?write.csv</code> para obter detalhes). No entanto, existem três argumentos que você deve usar sempre que executar <code>write.csv</code>.</p>
<p>Primeiro, você deve fornecer a função <code>write.csv</code> o nome do data frame que deseja salvar. Em seguida, você deve fornecer um nome de arquivo para dar ao seu arquivo. R entenderá esse nome literalmente, portanto, certifique-se de fornecer uma extensão.</p>
<p>Finalmente, você deve adicionar o argumento <code>row.names = FALSE</code>. Isso impedirá R de adicionar uma coluna de números no início do seu data frame. Esses números identificarão suas linhas de 1 a 1000, mas é improvável que qualquer programa em que você abrir <code>df_pnad.csv</code> compreenderá o sistema de nomes de linhas. Muito provavelmente, o programa assumirá que os nomes das linhas são a primeira coluna de dados em seu data frame. Na verdade, isso é exatamente o que R assumirá se você reabrir <code>df_pnad.csv</code>. Se você salvar e abrir <code>df_pnad.csv</code> várias vezes em R, notará colunas duplicadas de números de linha se formando no início de seu data frame. Não posso explicar por que R faz isso, mas posso explicar como evitá-lo: use <code>row.names = FALSE</code> sempre que salvar dados com <code>write.csv</code>.</p>
<h2 id="notação">Notação</h2>
<p>Para que você consiga trabalhar com valores individuais dentro do seu data frame, tarefa necessária em análise de dados, você pode selecionar valores dentro de um objeto R através do seu sistema de notação.</p>
<h3 id="selecionando-valores">Selecionando valores</h3>
<p>O R tem um sistema de notação que permite extrair valores de objetos R. Para extrair um valor ou conjunto de valores de um data frame, escreva o nome do data frame seguido por um par de colchetes:</p>
<pre><code class="language-r">df[ , ]
</code></pre>
<pre><code>##       Ano Trimestre                  UF  V1022  V2007 V2009    V2010 VD2003
## 1    2021         1               Ceará Urbana  Homem    80   Branca      2
## 2    2021         1    Distrito Federal Urbana Mulher    19    Parda      4
## 3    2021         1          Pernambuco Urbana Mulher    36    Preta      2
## 4    2021         1      Santa Catarina Urbana  Homem    50    Parda      2
## 5    2021         1           São Paulo Urbana Mulher    43    Parda      3
## 6    2021         1               Goiás Urbana  Homem    35    Parda      3
## 7    2021         1               Amapá Urbana  Homem    72    Parda      3
## 8    2021         1           São Paulo Urbana Mulher    23  Amarela      8
## 9    2021         1    Distrito Federal Urbana  Homem    23    Parda      5
....
Saída truncada para visualização
</code></pre>
<p>Entre os colchetes estarão dois índices separados por uma vírgula. Os índices dizem ao R quais valores retornar. O R usará o primeiro índice para o subconjunto das linhas do dataframe e o segundo índice para o subconjunto das colunas. Ou seja, df[linhas, colunas].</p>
<p>Você pode pensar em um índice como um CEP ou o endereço de um valor ou um conjunto de valores, e a indexação como o processo que você utilizaria para encontrar um desses valores numa lista telefônica, no Google ou no Maps.</p>
<p>Você tem uma escolha quando se trata de escrever índices. Existem seis maneiras diferentes de escrever um índice para o R e cada uma faz algo ligeiramente diferente. Eles são todos muito simples e muito úteis, então vamos dar uma olhada em cada um deles. Você pode criar índices com:</p>
<ul>
<li>Inteiros positivos</li>
<li>Inteiros negativos</li>
<li>Zero</li>
<li>Espaços em branco</li>
<li>Valores lógicos</li>
<li>Nomes</li>
</ul>
<p>O mais simples de usar são os inteiros positivos.</p>
<p>Por exemplo, caso você queira extrair um valor que está na primeira linha e na quarta coluna do seu data frame, no caso, estamos usando o df, que é uma pequena amostra da pnad, lembra? Como podemos fazer isso?</p>
<pre><code class="language-r">df[1, 4]
</code></pre>
<pre><code>## [1] &quot;Urbana&quot;
</code></pre>
<p>Para extrair mais de um valor, use um vetor com inteiros positivos. Por exemplo, se você quer retornar a primeira linha de <em>df</em> com df[1, c(1,2,3)] ou df[1, 1:3]</p>
<pre><code class="language-r">df[1,1:3]
</code></pre>
<pre><code>##    Ano Trimestre    UF
## 1 2021         1 Ceará
</code></pre>
<pre><code class="language-r">df[1, c(1,2,3)]
</code></pre>
<pre><code>##    Ano Trimestre    UF
## 1 2021         1 Ceará
</code></pre>
<p>Essa notação não é limitada somente a objetos do tipo data frame. Você pode usar a mesma sintaxe para selecionar valores em qualquer objeto R, desde que você forneça um índice para cada dimensão do objeto. Então, por exemplo, você pode definir um subconjunto de um vetor (que tem uma dimensão) com um único índice:</p>
<pre><code class="language-r">vec &lt;- c(10, 15, 31, 60, 10, 2)
vec[1:3]
</code></pre>
<pre><code>## [1] 10 15 31
</code></pre>
<p>Bom, isso é a notação usando usando inteiros positivos. Como seria com inteiros negativos? Quais as diferenças?</p>
<p>Vamos lá!</p>
<p>Os inteiros negativos fazem exatamente o oposto dos inteiros positivos durante a indexação. O R retornará todos os elementos, exceto os elementos em um índice negativo. Por exemplo, df[-1, 1:10] retornará tudo, exceto a primeira linha do data frame. df[-(2:999), 1:10] retornará a primeira linha e a última linha (e excluirá todo o resto):</p>
<pre><code class="language-r">df[-(2:999), 1:10]
</code></pre>
<pre><code>##       Ano Trimestre             UF  V1022 V2007 V2009  V2010 VD2003
## 1    2021         1          Ceará Urbana Homem    80 Branca      2
## 1000 2021         1 Santa Catarina  Rural Homem    66 Branca      2
##                         VD3005 VD4016
## 1    16 anos ou mais de estudo     NA
## 1000          5 anos de estudo   1000
</code></pre>
<pre><code class="language-r">df[-1, 9]
</code></pre>
<pre><code>##   [1] &quot;11 anos de estudo&quot;                       
##   [2] &quot;12 anos de estudo&quot;                       
##   [3] &quot;5 anos de estudo&quot;                        
##   [4] &quot;9 anos de estudo&quot;                        
##   [5] &quot;14 anos de estudo&quot;                       
##   [6] &quot;16 anos ou mais de estudo&quot;               
##   [7] &quot;12 anos de estudo&quot;                       
##   [8] &quot;14 anos de estudo&quot;                       
##   [9] &quot;5 anos de estudo&quot;                        
##  [10] &quot;9 anos de estudo&quot;                        
....
Saída truncada para visualização
</code></pre>
<p>A vantagem de usar inteiros negativos ao invés de inteiros positivos na indexação, é que os inteiros negativos são uma maneira mais eficiente de criar um subconjunto do que os inteiros positivos, se você quiser incluir a maioria das linhas ou colunas de um data frame.</p>
<p>Na notação <code>df[-2,2]</code> o que irá ser mostrado pelo R?</p>
<p>O que acontecerá se você usar o zero como um índice? Zero não é um inteiro positivo nem um inteiro negativo, mas ele ainda usará para fazer um tipo de subconjunto. O R, neste caso, não retornará nada de uma dimensão quando você usa zero como um índice:</p>
<pre><code class="language-r">df[0, 0]
</code></pre>
<pre><code>## data frame with 0 columns and 0 rows
</code></pre>
<p>Pra ser sincera, indexar com 0 não ajuda em muita coisa.</p>
<p>Além dos inteiros positivos, inteiros negativos, e zero, você pode também usar espaços em branco na indexação. O espaço em branco no R vai extrair todos os valores em uma dimensão. Isso permite subdividir um objeto em uma dimensão, mas não nas outras, o que é útil para extrair linhas ou colunas inteiras de um data frame:</p>
<pre><code class="language-r">df[1, ]
</code></pre>
<pre><code>##    Ano Trimestre    UF  V1022 V2007 V2009  V2010 VD2003
## 1 2021         1 Ceará Urbana Homem    80 Branca      2
##                      VD3005 VD4016
## 1 16 anos ou mais de estudo     NA
</code></pre>
<pre><code class="language-r">df[, 5]
</code></pre>
<pre><code>##    [1] &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot; &quot;Homem&quot;  &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot;
##    [9] &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot; &quot;Mulher&quot;
##   [17] &quot;Mulher&quot; &quot;Mulher&quot; &quot;Mulher&quot; &quot;Mulher&quot; &quot;Mulher&quot; &quot;Mulher&quot; &quot;Homem&quot;  &quot;Mulher&quot;
##   [25] &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot; &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot; 
##   [33] &quot;Mulher&quot; &quot;Homem&quot;  &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot;
##   [41] &quot;Mulher&quot; &quot;Mulher&quot; &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot; 
##   [49] &quot;Mulher&quot; &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot; &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot;
##   [57] &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot;
##   [65] &quot;Mulher&quot; &quot;Homem&quot;  &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot;
##   [73] &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot; &quot;Homem&quot;  &quot;Homem&quot;  &quot;Mulher&quot; &quot;Mulher&quot;
....
Saída truncada para visualização
</code></pre>
<p>Estamos quase chegando no final dos tipos de indexação que são possíveis de serem feitas no R.
No caso de valores lógicos, se você fornecer um vetor de <code>TRUEs</code> e <code>FALSEs</code> como seu índice, o R combinará cada <code>TRUE</code> e <code>FALSE</code> com uma linha do data frame (ou uma coluna, dependendo de onde você colocar o índice). O R então retornará cada linha que corresponde a um <code>TRUE</code>.</p>
<p>Pode ser útil imaginar R lendo o data frame e perguntando: &ldquo;Devo retornar a enésima linha da estrutura de dados?&rdquo; e depois consultar o enésimo valor do índice para obter sua resposta. Para que este sistema funcione, seu vetor deve ser tão longo quanto a dimensão que você está tentando subdividir:</p>
<pre><code class="language-r">df[1, c(TRUE, TRUE, FALSE)]
</code></pre>
<pre><code>##    Ano Trimestre  V1022 V2007  V2010 VD2003 VD4016
## 1 2021         1 Urbana Homem Branca      2     NA
</code></pre>
<pre><code class="language-r">rows &lt;- c(F, TRUE, TRUE, F, F, F, F, F, F, F, F, F, F, F, F, F, 
  F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, 
  F, F, F, F, F, F, F, F, F, F, F, F, F, F)

df[rows, ]
</code></pre>
<pre><code>##      Ano Trimestre                 UF  V1022  V2007 V2009   V2010 VD2003
## 2   2021         1   Distrito Federal Urbana Mulher    19   Parda      4
## 3   2021         1         Pernambuco Urbana Mulher    36   Preta      2
## 54  2021         1           Rondônia Urbana  Homem    44  Branca      2
## 55  2021         1     Espírito Santo Urbana Mulher    45  Branca      4
## 106 2021         1       Minas Gerais  Rural  Homem    31   Parda      3
## 107 2021         1          São Paulo Urbana  Homem    14  Branca      4
## 158 2021         1            Alagoas Urbana  Homem    38   Parda      1
## 159 2021         1              Amapá Urbana Mulher    20   Parda      3
## 210 2021         1            Roraima Urbana  Homem    55   Parda      6
....
Saída truncada para visualização
</code></pre>
<p>Esse sistema será de grande ajuda na parte de modificação de valores que veremos daqui a pouco.</p>
<p>Finalmente, você pode pedir os elementos que deseja pelo nome - se o seu objeto tiver nomes (consulte Nomes). Essa é uma maneira comum de extrair as colunas de um data frame, já que as colunas quase sempre têm um nome:</p>
<pre><code class="language-r">names(df)
</code></pre>
<pre><code>##  [1] &quot;Ano&quot;       &quot;Trimestre&quot; &quot;UF&quot;        &quot;V1022&quot;     &quot;V2007&quot;     &quot;V2009&quot;    
##  [7] &quot;V2010&quot;     &quot;VD2003&quot;    &quot;VD3005&quot;    &quot;VD4016&quot;
</code></pre>
<pre><code class="language-r">df[3, c(&quot;UF&quot;, &quot;V2007&quot;, &quot;V2010&quot;)]
</code></pre>
<pre><code>##           UF  V2007 V2010
## 3 Pernambuco Mulher Preta
</code></pre>
<pre><code class="language-r">df[ , &quot;VD3005&quot;]
</code></pre>
<pre><code>##    [1] &quot;16 anos ou mais de estudo&quot;               
##    [2] &quot;11 anos de estudo&quot;                       
##    [3] &quot;12 anos de estudo&quot;                       
##    [4] &quot;5 anos de estudo&quot;                        
##    [5] &quot;9 anos de estudo&quot;                        
##    [6] &quot;14 anos de estudo&quot;                       
##    [7] &quot;16 anos ou mais de estudo&quot;               
##    [8] &quot;12 anos de estudo&quot;                       
##    [9] &quot;14 anos de estudo&quot;                       
##   [10] &quot;5 anos de estudo&quot;                        
....
Saída truncada para visualização
</code></pre>
<h4 id="exercícios-1">Exercícios</h4>
<p>Retorne a informação da observação 800, e as colunas Ano, VD3005, V2009, V2010 do nosso data frame da amostra da pnad. O que o R retornará? Faça a mesma indexação usando inteiros positivos ou inteiros negativos.</p>
<h3 id="diferentes-seleções--e-">Diferentes seleções: <code>[[</code> e <code>$</code></h3>
<p>Dois tipos de objeto em R obedecem a um segundo sistema opcional de notação. Você pode extrair valores de data frames e listas com a sintaxe <code>$</code>. Você encontrará a sintaxe $ repetidamente no R, então vamos examinar como ela funciona.</p>
<p>Para selecionar uma coluna de um data frame, escreva o nome do data frame, no caso df, e o nome da coluna separados por $. Observe que nenhuma aspa deve estar no nome da coluna:</p>
<pre><code class="language-r">df$V2009
</code></pre>
<pre><code>##    [1]  80  19  36  50  43  35  72  23  23  47  71  16  48  13  25   3  27  83
##   [19]  55  79  14  80  20  21  22  69  57  27  63  35  28  41  39  71   7  45
##   [37]  11   9  48  14  48  47   5  36  25  55   8  64   7  58  30   1  18  44
##   [55]  45  17   9  24  11  11  71  75  49  20  55  31  60   2   7  81  68  15
##   [73]  31   2  44  40  49  55   9  40  55   0  35  32   7  63  62  54  48   5
##   [91]  46  49  20  90  16   0  41  15  67  26  22  18  58  63   0  31  14  39
##  [109]  34  44  61  48  47  29  43  65  10  36  20   7  28  18  23  75  37  49
##  [127]  45   3  61  54  38  50  41  47  39  44  32  27  66  55  70  69  41  31
##  [145]  38  91  62  30  21  59   4  29   5  24  83   6  15  38  20  89  85  44
##  [163]  73   7  49  22  33   5  18   4  27  22   0  21  74  26  58  52  77  36
....
Saída truncada para visualização
</code></pre>
<p>O R retornará todos os valores da coluna como um vetor. Esta notação <code>$</code> é muito útil e muito usada porque você freqüentemente armazenará as variáveis de seus conjuntos de dados como colunas em um data frame. De vez em quando, você desejará executar uma função como <code>mean()</code> ou <code>median()</code> nos valores de uma variável. Em R, essas funções esperam um vetor de valores como entrada, e o <code>df$V2009</code> entrega seus dados no formato certo:</p>
<pre><code class="language-r">mean(df$V2009)
</code></pre>
<pre><code>## [1] 36.939
</code></pre>
<p>Você pode usar a mesma notação com <code>$</code> com os elementos de uma lista, se eles tiverem nomes. Essa notação também tem uma vantagem com listas. Se você criar um subconjunto de uma lista da maneira usual, o R retornará uma nova lista que contém os elementos solicitados, mesmo se você solicitar apenas um único elemento.</p>
<pre><code class="language-r">lista &lt;- list(numbers = c(1, 2), logical = TRUE, strings = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))

lista
</code></pre>
<pre><code>## $numbers
## [1] 1 2
## 
## $logical
## [1] TRUE
## 
## $strings
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;
</code></pre>
<pre><code class="language-r">lista[1]
</code></pre>
<pre><code>## $numbers
## [1] 1 2
</code></pre>
<p>O resultado é uma lista menor com um elemento. Esse elemento é o vetor c(1, 2). Isso pode ser irritante porque muitas funções R não funcionam com listas. Por exemplo, sum(lst[1]) retornará um erro. Para você conseguir fazer uma operação com lista, você precisará usar <code>$</code>:</p>
<pre><code class="language-r">sum(lista$numbers)
</code></pre>
<pre><code>## [1] 3
</code></pre>
<p>Se os elementos em sua lista não tiverem nomes (ou você não quiser usar os nomes), você pode usar dois colchetes <code>[[ ]]</code>, em vez de um, para criar um subconjunto da lista. Essa notação fará a mesma coisa que a notação <code>$</code>:</p>
<pre><code class="language-r">lista[[1]]
</code></pre>
<pre><code>## [1] 1 2
</code></pre>
<p>Em outras palavras, se você subdividir uma lista com a notação de colchete único, o R retornará uma lista menor. Se você subdividir uma lista com a notação de colchetes duplos, o R retornará apenas os valores que estavam dentro de um elemento da lista. Você pode combinar esse recurso com qualquer um dos métodos de indexação de R:</p>
<pre><code class="language-r">lista[&quot;numbers&quot;]
</code></pre>
<pre><code>## $numbers
## [1] 1 2
</code></pre>
<pre><code class="language-r">lista[[&quot;numbers&quot;]]
</code></pre>
<pre><code>## [1] 1 2
</code></pre>
<p>Essa diferença é sutil, mas importante. Na comunidade R, há uma maneira popular e útil de pensar sobre isso. Imagine que cada lista é um trem e cada elemento é um vagão. Quando você usa colchetes simples, o R seleciona vagões de trem individuais e os retorna como um novo trem. Cada vagão mantém seu conteúdo, mas esse conteúdo ainda está dentro de um vagão de trem (ou seja, uma lista). Quando você usa colchetes duplos, o R realmente descarrega o carro e lhe devolve o conteúdo. Resumindo:</p>
<p>Use colchetes simples para selecionar vagões de trem e colchetes duplos para selecionar o conteúdo dentro de um vagão.</p>
<p><img src="/courses/rbase/dia2_files/hopr_train.png" alt="A metáfora do trem"></p>
<h4 id="exercícios-2">Exercícios</h4>
<p>Assim como na lista, é possível usar os colchetes <code>[[ ]]</code> em data frame. Tente usá-los no data frame da pnad. Quais são as diferenças encontradas?</p>
<h2 id="modificando-valores">Modificando valores</h2>
<p>Para manipular os valores dentro do seu data frame, faça primeiro uma cópia que você pode manipular. Isso garantirá que você sempre tenha uma cópia original do data frame para usar (caso as coisas dêem errado):</p>
<pre><code class="language-r">df2 &lt;- df
</code></pre>
<h3 id="modificando-os-valores-diretamente">Modificando os valores diretamente</h3>
<p>Você pode usar o sistema de notação de R para modificar valores dentro de um objeto. Primeiro, descreva o valor (ou valores) que você deseja modificar. Em seguida, use o operador de atribuição <code>&lt;-</code> para sobrescrever esses valores. O R irá atualizar os valores selecionados no objeto original. Em um exemplo real:</p>
<pre><code class="language-r">vetor &lt;- c(0, 0, 0, 0, 0, 0)
vetor
</code></pre>
<pre><code>## [1] 0 0 0 0 0 0
</code></pre>
<p>Você pode selecionar um valor dentro desse vetor· Neste caso selecionamos o primeiro:</p>
<pre><code class="language-r">vetor[1]
</code></pre>
<pre><code>## [1] 0
</code></pre>
<p>E aqui, podemos modificar o valor:</p>
<pre><code class="language-r">vetor[1] &lt;- 35
vetor
</code></pre>
<pre><code>## [1] 35  0  0  0  0  0
</code></pre>
<p>Você pode substituir vários valores de uma vez, desde que o número de novos valores seja igual ao número de valores selecionados:</p>
<pre><code class="language-r">vetor[c(3, 4, 5)] &lt;- c(1, 1, 1)
vetor
</code></pre>
<pre><code>## [1] 35  0  1  1  1  0
</code></pre>
<pre><code class="language-r">vetor[4:6] &lt;- vetor[4:6] + 1
vetor
</code></pre>
<pre><code>## [1] 35  0  1  2  2  1
</code></pre>
<p>Você também pode criar valores que ainda não existem em seu objeto. O R irá expandir o objeto para acomodar os novos valores:</p>
<pre><code class="language-r">vetor[7] &lt;- 20
vetor
</code></pre>
<pre><code>## [1] 35  0  1  2  2  1 20
</code></pre>
<p>Isto é uma ótima maneira de adicionar novas variáveis ao data frame:</p>
<pre><code class="language-r">df2$nova_coluna &lt;- 1:1000

head(df2)
</code></pre>
<pre><code>##    Ano Trimestre               UF  V1022  V2007 V2009  V2010 VD2003
## 1 2021         1            Ceará Urbana  Homem    80 Branca      2
## 2 2021         1 Distrito Federal Urbana Mulher    19  Parda      4
## 3 2021         1       Pernambuco Urbana Mulher    36  Preta      2
## 4 2021         1   Santa Catarina Urbana  Homem    50  Parda      2
## 5 2021         1        São Paulo Urbana Mulher    43  Parda      3
## 6 2021         1            Goiás Urbana  Homem    35  Parda      3
##                      VD3005 VD4016 nova_coluna
## 1 16 anos ou mais de estudo     NA           1
## 2         11 anos de estudo     NA           2
## 3         12 anos de estudo   1045           3
## 4          5 anos de estudo   1500           4
## 5          9 anos de estudo   1600           5
## 6         14 anos de estudo   3000           6
</code></pre>
<p>Da mesma forma que você criou uma nova coluna, é possível removê-la atribuindo o valor <code>NULL</code></p>
<pre><code class="language-r">df2$nova_coluna &lt;- NULL

head(df2)
</code></pre>
<pre><code>##    Ano Trimestre               UF  V1022  V2007 V2009  V2010 VD2003
## 1 2021         1            Ceará Urbana  Homem    80 Branca      2
## 2 2021         1 Distrito Federal Urbana Mulher    19  Parda      4
## 3 2021         1       Pernambuco Urbana Mulher    36  Preta      2
## 4 2021         1   Santa Catarina Urbana  Homem    50  Parda      2
## 5 2021         1        São Paulo Urbana Mulher    43  Parda      3
## 6 2021         1            Goiás Urbana  Homem    35  Parda      3
##                      VD3005 VD4016
## 1 16 anos ou mais de estudo     NA
## 2         11 anos de estudo     NA
## 3         12 anos de estudo   1045
## 4          5 anos de estudo   1500
## 5          9 anos de estudo   1600
## 6         14 anos de estudo   3000
</code></pre>
<p>Você pode selecionar um conjunto de linhas dentro de um data frame usando uma combinação dos sistemas de notação do R. Você pode destacar apenas os valores que você quer, definindo a dimensão das colunas do df2 com <code>[</code>. Ou, você pode definir um subconjunto da coluna <code>df2$UF</code>, misturando o <code>$</code> com o <code>[</code>.</p>
<pre><code class="language-r">df2[c(5, 8, 39,44), ]
</code></pre>
<pre><code>##     Ano Trimestre        UF  V1022  V2007 V2009   V2010 VD2003
## 5  2021         1 São Paulo Urbana Mulher    43   Parda      3
## 8  2021         1 São Paulo Urbana Mulher    23 Amarela      8
## 39 2021         1 São Paulo Urbana Mulher    48  Branca      3
## 44 2021         1 São Paulo Urbana  Homem    36  Branca      2
##                       VD3005 VD4016
## 5           9 anos de estudo   1600
## 8          12 anos de estudo   1200
## 39         12 anos de estudo   1200
## 44 16 anos ou mais de estudo     NA
</code></pre>
<pre><code class="language-r">## selecionando linhas especificas e a coluna V2010
df2[c(5, 8, 39,44), 6]
</code></pre>
<pre><code>## [1] 43 23 48 36
</code></pre>
<pre><code class="language-r">## podemos fazer o mesmo dessa forma
df2$V2009[c(5, 8, 39,44)]
</code></pre>
<pre><code>## [1] 43 23 48 36
</code></pre>
<p>Suponha que você sabe que os valores dessas linhas na coluna V2009 estão errados e você precisa arrumá-los atribuindo novos valores. O conjunto de novos valores terá que ser do mesmo tamanho que o conjunto de valores que você está substituindo.</p>
<pre><code class="language-r">df2$V2009[c(5, 8, 39,44)] &lt;- c(23, 23, 23, 23)

# ou

df2$V2009[c(5, 8, 39,44)]&lt;- 23

head(df2, 44)
</code></pre>
<pre><code>##     Ano Trimestre                UF  V1022  V2007 V2009   V2010 VD2003
## 1  2021         1             Ceará Urbana  Homem    80  Branca      2
## 2  2021         1  Distrito Federal Urbana Mulher    19   Parda      4
## 3  2021         1        Pernambuco Urbana Mulher    36   Preta      2
## 4  2021         1    Santa Catarina Urbana  Homem    50   Parda      2
## 5  2021         1         São Paulo Urbana Mulher    23   Parda      3
## 6  2021         1             Goiás Urbana  Homem    35   Parda      3
## 7  2021         1             Amapá Urbana  Homem    72   Parda      3
## 8  2021         1         São Paulo Urbana Mulher    23 Amarela      8
## 9  2021         1  Distrito Federal Urbana  Homem    23   Parda      5
....
Saída truncada para visualização
</code></pre>
<p>Observe que você está mudando os valores dos objetos salvos em df2, nos livros em inglês, isso é chamado de <em>modify in place</em>. Você não acaba com uma cópia modificada do df2; os novos valores aparecerão dentro do df2. É preciso fazer isso de forma consciente e segura, para não sobrescrever informações, por isso, recomendamos trabalhar com cópias do objeto original (df2 ao invés de df).</p>
<p>A mesma técnica funcionará se você armazenar seus dados em um vetor, matriz, array, lista ou data frame. Basta descrever os valores que você deseja alterar com o sistema de notação de R e, em seguida, atribuir esses valores com o operador de atribuição de R <code>&lt;-</code>.</p>
<h4 id="exercícios-3">Exercícios</h4>
<p>Considere o vetor abaixo. Atribua um novo valor na posição 3 deste vetor. É possível atribuir uma string no lugar de um número?</p>
<pre><code class="language-r">vetor_x&lt;- c(10,30,50,10)
</code></pre>
<h3 id="modificando-com-testes-lógicos">Modificando com testes lógicos</h3>
<p>E se você precisa saber um valor específico e precise que o R te retorne a linha em que este valor está? Por que no caso anterior você sabia as linhas que você queria mudar, mas e quando o seu objeto é grande e você não sabe exatamente onde a informação se encontra? Como fazer?</p>
<p>Lembra do sistema de notação do R que permitia valores lógicos? Você pode deixar um teste lógico criar um vetor de TRUEs e FALSEs para você.</p>
<p>Um teste lógico é uma comparação como “um é menor que dois?”, <code>1 &lt; 2</code> ou “três é maior que quatro?”, <code>3 &gt; 4</code>. O R fornece sete operadores lógicos que você pode usar para fazer comparações, e eles podem ser vistos na tabela abaixo.</p>
<p>Cada operador retorna TRUE ou FALSE. Se você usar um operador para comparar vetores, o R fará comparações entre elementos - assim como faz com os operadores aritméticos:</p>
<p>Table: Table 1: Operadores lógicos</p>
<table>
<thead>
<tr>
<th style="text-align:left">Operador</th>
<th style="text-align:left">Sintaxe</th>
<th style="text-align:left">Teste</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&gt;</td>
<td style="text-align:left">a &gt; b</td>
<td style="text-align:left">a é maior que b?</td>
</tr>
<tr>
<td style="text-align:left">&gt;=</td>
<td style="text-align:left">a &gt;= b</td>
<td style="text-align:left">a é maior ou igual a b?</td>
</tr>
<tr>
<td style="text-align:left">&lt;</td>
<td style="text-align:left">a &lt; b</td>
<td style="text-align:left">a é menor que b?</td>
</tr>
<tr>
<td style="text-align:left">&lt;=</td>
<td style="text-align:left">a &lt;= b</td>
<td style="text-align:left">a é menor ou igual a b?</td>
</tr>
<tr>
<td style="text-align:left">==</td>
<td style="text-align:left">a == b</td>
<td style="text-align:left">a é igual a b?</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td style="text-align:left">a != b</td>
<td style="text-align:left">a é diferente de b?</td>
</tr>
<tr>
<td style="text-align:left">%in%</td>
<td style="text-align:left">a %in% c(a, b, c)</td>
<td style="text-align:left">a está contido em algum dos elementos de b?</td>
</tr>
</tbody>
</table>
<pre><code class="language-r">1 &gt; 2
</code></pre>
<pre><code>## [1] FALSE
</code></pre>
<pre><code class="language-r">1 &gt; c(0, 1, 2)
</code></pre>
<pre><code>## [1]  TRUE FALSE FALSE
</code></pre>
<pre><code class="language-r">c(1, 2, 3) == c(3, 2, 1)
</code></pre>
<pre><code>## [1] FALSE  TRUE FALSE
</code></pre>
<p>O operador <code>%in%</code> é o único que não executa normalmente o elemento inteiro. <code>%in%</code> testa se os valores do lado esquerdo estão no vetor do lado direito. Se você fornecer um vetor no lado esquerdo, este operador não irá emparelhar os valores à esquerda com os valores à direita e, em seguida, fará testes de elementos. Em vez disso, ele testará independentemente se cada valor à esquerda está em algum lugar do vetor à direita:</p>
<pre><code class="language-r">1 %in% c(3, 4, 5)
</code></pre>
<pre><code>## [1] FALSE
</code></pre>
<pre><code class="language-r">c(1, 2) %in% c(3, 4, 5)
</code></pre>
<pre><code>## [1] FALSE FALSE
</code></pre>
<pre><code class="language-r">c(1, 2, 3) %in% c(3, 4, 5)
</code></pre>
<pre><code>## [1] FALSE FALSE  TRUE
</code></pre>
<pre><code class="language-r">c(1, 2, 3, 4) %in% c(3, 4, 5)
</code></pre>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE
</code></pre>
<p>Observe que você testa a igualdade com um sinal de igual duplo, <code>==</code>, e não um único sinal de igual, <code>=</code>, que é outra maneira de escrever <code>&lt;-</code>. É fácil esquecer e usar <code>a = b</code> para testar se a é igual a b. Infelizmente, você terá uma surpresa desagradável. O R não retornará <code>TRUE</code> ou <code>FALSE</code>, porque não terá que: a será igual a b, porque você acabou de executar o equivalente a <code>a &lt;- b</code>.</p>
<p>Você pode comparar quaisquer dois objetos no R com um operador lógico; no entanto, os operadores lógicos fazem mais sentido se você comparar dois objetos do mesmo tipo de dados. Se você comparar objetos de diferentes tipos de dados, o R usará suas regras de coerção para forçar os objetos ao mesmo tipo antes de fazer a comparação.</p>
<h4 id="exercícios-4">Exercícios</h4>
<p>Extraia a coluna <code>V2010</code> do <code>df2</code> e teste os valores igual a &lsquo;Branca&rsquo;. Além disso conte quantas linhas são iguais a &lsquo;Branca&rsquo;. Dica: use a função sum() para fazer a contagem.</p>
<p>Para resumir, você pode usar um teste lógico para selecionar valores dentro de um objeto.</p>
<p>O subconjunto lógico é uma técnica poderosa porque permite identificar, extrair e modificar rapidamente valores individuais em seu conjunto de dados. Ao trabalhar com subconjuntos lógicos, você não precisa saber onde existe um valor em seu conjunto de dados. Você só precisa saber como descrever o valor com um teste lógico.</p>
<p>Além dos operadores lógicos, também temos os operadores booleanos, os operadores booleanos são como <code>&amp;</code> ou <code>|</code>. Eles reduzem os resultados de vários testes lógicos em um único <code>TRUE</code> ou <code>FALSE</code>. Os operadores e seus testes podem ser vistos na tabela abaixo.</p>
<p>Table: Table 2: Operadores booleanos</p>
<table>
<thead>
<tr>
<th style="text-align:left">Operador</th>
<th style="text-align:left">Sintaxe</th>
<th style="text-align:left">Teste</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&amp;</td>
<td style="text-align:left">cond1 &amp; cond2</td>
<td style="text-align:left">cond1 e cond2 são simultâneamente verdadeiros?</td>
</tr>
<tr>
<td style="text-align:left">|</td>
<td style="text-align:left">cond1 | cond2</td>
<td style="text-align:left">cond1 ou cond2 é verdadeiro?</td>
</tr>
<tr>
<td style="text-align:left">xor</td>
<td style="text-align:left">xor(cond1, cond2)</td>
<td style="text-align:left">Apenas cond1 ou apenas cond2 é verdadeiro?</td>
</tr>
<tr>
<td style="text-align:left">!</td>
<td style="text-align:left">!cond1</td>
<td style="text-align:left">Inverta o resultado de cond1</td>
</tr>
<tr>
<td style="text-align:left">any</td>
<td style="text-align:left">any(cond1, cond2, cond3, &hellip;)</td>
<td style="text-align:left">Algum resultado em c(cond1, cond2, cond3, &hellip;) é verdadeiro?</td>
</tr>
<tr>
<td style="text-align:left">all</td>
<td style="text-align:left">all(cond1, cond2, cond3, &hellip;)</td>
<td style="text-align:left">Todos os resultados em c(cond1, cond2, cond3, &hellip;) são verdadeiros?</td>
</tr>
</tbody>
</table>
<p>Para usar um operador booleano, coloque-o entre dois testes lógicos completos. O R irá executar cada teste lógico e, em seguida, usar o operador booleano para combinar os resultados em um único <code>TRUE</code> ou <code>FALSE</code>.</p>
<p>Quando usados com vetores, os operadores booleanos seguirão a mesma execução elementar que os operadores aritméticos e lógicos:</p>
<pre><code class="language-r">a &lt;- c(1, 2, 3)
b &lt;- c(1, 2, 3)
c &lt;- c(1, 2, 4)

a == b
</code></pre>
<pre><code>## [1] TRUE TRUE TRUE
</code></pre>
<pre><code class="language-r">b == c
</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE
</code></pre>
<pre><code class="language-r">a == b &amp; b == c
</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE
</code></pre>
<p>Você pode usar um operador booleano para localizar as pessoas de 23 anos e de escolaridade 9 anos de estudo no df2.</p>
<pre><code class="language-r">df2$V2009 == 40 &amp; df2$VD3005 == &quot;8 anos de estudo&quot;
</code></pre>
<pre><code>##    [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
....
Saída truncada para visualização
</code></pre>
<h3 id="valores-desconhecidos">Valores desconhecidos</h3>
<p>Problemas com informações desconhecidas acontecem com frequência na análise de dados. Normalmente, eles são mais simples: você não sabe um valor porque a medição foi perdida, corrompida ou nunca feita para começar. O R tem uma maneira de ajudá-lo a gerenciar esses valores ausentes.</p>
<p>O caractere <code>NA</code> é um símbolo especial em R. Ele significa “não disponível” e pode ser usado como um espaço reservado para informações ausentes. O R tratará <code>NA</code> exatamente como você deseja que as informações ausentes sejam tratadas. Por exemplo, qual resultado você esperaria se adicionar 1 a uma informação ausente?</p>
<pre><code class="language-r">1 + NA
</code></pre>
<pre><code>## [1] NA
</code></pre>
<p>O R retornará uma segunda informação faltante. Não seria correto dizer que 1 + NA = 1 porque há uma boa chance de que o valor ausente não seja zero. Você não tem informações suficientes para determinar o resultado.</p>
<pre><code class="language-r">NA == 1
</code></pre>
<pre><code>## [1] NA
</code></pre>
<p>Valores ausentes podem ajudá-lo a contornar lacunas em seus conjuntos de dados, mas também podem criar alguns problemas frustrantes. Suponha, por exemplo, que você coletou 1.000 observações e deseja tirar sua média com a função mean(). Se um dos valores for NA, seu resultado será NA:</p>
<pre><code class="language-r">c(NA, 1:50)
</code></pre>
<pre><code>##  [1] NA  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
## [26] 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49
## [51] 50
</code></pre>
<pre><code class="language-r">mean(c(NA, 1:50))
</code></pre>
<pre><code>## [1] NA
</code></pre>
<p>A maioria das funções R vem com o argumento opcional, <code>na.rm</code>, que significa <code>NA remove</code>. o R irá ignorar NAs quando avaliar uma função se você adicionar o argumento <code>na.rm = TRUE</code>:</p>
<pre><code class="language-r">mean(c(NA, 1:50), na.rm = TRUE)
</code></pre>
<pre><code>## [1] 25.5
</code></pre>
<p>Ocasionalmente, você pode querer identificar os NAs em seu conjunto de dados com um teste lógico, mas isso também cria um problema. Como você faria isso? Se algo for um valor ausente, qualquer teste lógico que o use retornará um valor ausente, até mesmo este teste:</p>
<pre><code class="language-r">NA == NA
</code></pre>
<pre><code>## [1] NA
</code></pre>
<p>O que significa que testes como este não ajudarão você a encontrar valores ausentes:</p>
<pre><code class="language-r">c(1, 2, 3, NA) == NA
</code></pre>
<pre><code>## [1] NA NA NA NA
</code></pre>
<p>O R fornece uma função especial que pode testar se um valor é um NA. A função é <code>is.na</code>:</p>
<pre><code class="language-r">is.na(NA)
</code></pre>
<pre><code>## [1] TRUE
</code></pre>
<pre><code class="language-r">vet &lt;- c(1, 2, 3, NA)

is.na(vet)
</code></pre>
<pre><code>## [1] FALSE FALSE FALSE  TRUE
</code></pre>
<h4 id="exercícios-5">Exercícios</h4>
<p>Conte o número de NAs na coluna <code>VD4016</code> do data frame <code>df2</code>.</p>
<h2 id="revisão">Revisão</h2>
<p>Na aula de hoje falamos sobre como importar dados, exportar dados, manipulação e diferentes notações para identificação de informações e modificação.</p>
<p>Para selecionar os valores em um data frame, ou em outro objeto R, aprendemos a usar a notação <code>data.frame[ , ]</code> e a partir dessa notação, selecionar diferentes linhas e colunas, usando números inteiros, números negativos, espaços em branco, valores lógicos e nomes.</p>
<p>Aprendemos com listas e dataframes a seleção pela notação de colchetes duplos <code>[[</code> e <code>$</code>.</p>
<p>Em relação a modificação de valores, aprendemos a modificar os valores no local dentro de um objeto R ao combinar a sintaxe da notação de R com o operador de atribuição, <code>&lt;-</code>. Isso permite que você atualize seus dados e limpe seus conjuntos de dados.</p>
<p>Aprendemos diferentes operadores lógicos: <code>&gt;</code>; <code>&gt;=</code>; <code>&lt;</code>; <code>&lt;=</code>; <code>==</code>; <code>!=</code>; <code>%in%</code> e operadores booleanos: <code>&amp;</code>; <code>|</code>; <code>xor</code>; <code>!</code>; <code>any</code>; <code>all</code>.</p>
<p>Quando você trabalha com grandes conjuntos de dados, modificar e recuperar valores cria um problema logístico próprio. Como você pode pesquisar os dados para encontrar os valores que deseja modificar ou recuperar? Como um usuário R, você pode fazer isso com subconjuntos lógicos. Crie um teste lógico com operadores lógicos e booleanos e, em seguida, use o teste como um índice na notação de colchetes de R. O R retornará os valores que você está procurando, mesmo se você não souber onde eles estão.</p>
<h3 id="exercícios-6">Exercícios</h3>
<p>Para os próximos exercícios considere o data frame da pnad que estamos usando nas aulas.</p>
<ol>
<li>Como você selecionaria o mesmo valor abaixo, mas usando inteiros negativos na seleção?</li>
</ol>
<pre><code class="language-r">df2[1,5]
</code></pre>
<pre><code>## [1] &quot;Homem&quot;
</code></pre>
<ol start="2">
<li>Qual a diferença em usar em selecionar determinada informação em um data frame usando colchetes duplos <code>[[]]</code> e usando colchetes simples? Observe o exemplo abaixo para responder:</li>
</ol>
<pre><code class="language-r">df2[['Ano']]
</code></pre>
<pre><code>##    [1] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [15] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [29] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [43] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [57] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [71] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [85] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##   [99] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [113] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
##  [127] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021
....
Saída truncada para visualização
</code></pre>
<pre><code class="language-r">df['Ano']
</code></pre>
<pre><code>##       Ano
## 1    2021
## 2    2021
## 3    2021
## 4    2021
## 5    2021
## 6    2021
## 7    2021
## 8    2021
## 9    2021
....
Saída truncada para visualização
</code></pre>
<ol start="3">
<li>Considere o data frame abaixo:</li>
</ol>
<pre><code class="language-r">sala &lt;- data.frame(
  id = c(1, 2, 3, 4, 5, 6),
  idade = c(20, 25, 30, 35, 40, 45),
  nome = c(&quot;Fulano&quot;, &quot;Cicrano&quot;, &quot;Beltrano&quot;, &quot;Herculano&quot;, &quot;Mariano&quot;, &quot;Carrano&quot;),
  sexo = &quot;Masculino&quot;,
  origem = c(&quot;Campinas&quot;, &quot;Barueri&quot;, &quot;Monte Verde&quot;, &quot;Rio de Janeiro&quot;, &quot;Natal&quot;, &quot;Belo Horizonte&quot;)
)
</code></pre>
<p>Modifique o nome de &lsquo;Mariano&rsquo; por &lsquo;Mariana&rsquo;. E altere a variável sexo para que seja um vetor que altere o valor para &lsquo;Feminino&rsquo; na posição em que o nome foi trocado para Mariana.</p>
<ol start="4">
<li>Considere o mesmo data frame sala construído no exercício anterior. Usando testes lógicos e operadores Booleanos. Verifique:</li>
</ol>
<p>a. se existe algum aluno que seja do sexo Masculino e seja de São Paulo. 
b. se existe algum aluno que tem idade maior ou iguam a 20 anos ou que seja de Campinas.
c. se existe alguém com o nome Beltrano.</p>
<ol start="5">
<li>Agora considere o seguinte data frame:</li>
</ol>
<pre><code class="language-r">cadastro &lt;- data.frame(
  id = c(10, 105, 299, 645, 7907, 8660, 4992, 630),
  idade = c(20, 25, 30, 35, 40, 45, 60, 53),
  nome = c(&quot;Thais&quot;, NA, &quot;Guilherme&quot;, &quot;Betânia&quot;, &quot;Ana Lucia&quot;, NA, NA, &quot;Pâmela&quot;),
  sexo = c(&quot;Feminino&quot;, &quot;Masculino&quot;,&quot;Masculino&quot;, NA ,NA, &quot;Feminino&quot;, &quot;Masculino&quot;, &quot;Feminino&quot;),
  origem = c(&quot;Campinas&quot;, NA, &quot;Monte Verde&quot;, &quot;Rio de Janeiro&quot;, NA, &quot;Belo Horizonte&quot;,&quot;São Paulo&quot;, &quot;Rio de Janeiro&quot;)
)
</code></pre>
<p>Usando as funções apropriadas ensinadas na aula de hoje:</p>
<p>a. Quantos NAs existe na coluna nome?
b. Quantos NAs existe na coluna sexo?
c. Quantos NAs existe na coluna origem?
d. Substitua os NAs na coluna sexo pelo valor &lsquo;Feminino&rsquo;</p>
<ol start="6">
<li>Salve o data frame &lsquo;cadastro&rsquo; do exercicio anterior em um arquivo <code>.csv</code>. Como você faria isso? Quais os argumentos que devem ser usados?</li>
</ol>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/courses/rbase/dia1/" rel="next">A base da linguagem R</a>
  </div>
  
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on 15 Jun 2021</p>

          





          




          


  
  



        </div>

      </article>

      <footer class="site-footer">

  

  

  
  <p class="powered-by">
    © 2021 LADDEM
  </p>
  

  
  






  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/latex.min.js"></script>
        
      

    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.8b7df62fd2da18ce73e29c13cc0a6198.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/en/js/wowchemy.min.71e713848164e269bc250f377042949d.js"></script>

    
  <script async defer src="https://buttons.github.io/buttons.js"></script>




</body>
</html>
